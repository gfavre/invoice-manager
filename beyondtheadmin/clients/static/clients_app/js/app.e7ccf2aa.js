(function(){var e={3482:function(e,t,n){"use strict";n.r(t),t["default"]={message:e=>{const{normalize:t}=e;return t(["hello i18n !!"])}}},4232:function(e,t,n){"use strict";var a=n(9242),i=n(3396),o=n(7139);const l={key:0,id:"div_id_company",class:"form-group"},s=(0,i._)("label",{for:"id_company_0",class:"requiredField"},[(0,i.Uk)(" Client pour"),(0,i._)("span",{class:"asteriskField"},"*")],-1),c=["value","id"],r=["for"],d=(0,i._)("hr",null,null,-1),u={id:"div_id_client_type",class:"form-group"},p={for:"id_client_type_0",class:"requiredField"},m=(0,i._)("span",{class:"asteriskField"},"*",-1),_={class:"custom-control custom-radio custom-control-inline"},y={class:"custom-control-label",for:"id_client_type_0"},h=(0,i._)("i",{class:"bi bi-journal"},null,-1),f={class:"custom-control custom-radio custom-control-inline"},v={class:"custom-control-label",for:"id_client_type_1"},g=(0,i._)("i",{class:"bi bi-person-fill"},null,-1),w={key:1},b={class:"border-left-primary shadow",id:"company_infos"},C=(0,i._)("legend",{class:"mb-1"},"Personne",-1),k={key:2},x={class:"border-left-primary shadow",id:"company_infos"},U=(0,i._)("legend",{class:"mb-1"},"Entreprise",-1),F={key:0},D=(0,i._)("dt",null,"The company",-1),z={class:"border-left-success shadow"},T=(0,i._)("legend",{class:"mb-1"},"Factures",-1),V={class:"buttonHolder"};function I(e,t,n,I,N,$){const q=(0,i.up)("person-form"),L=(0,i.up)("company-form"),S=(0,i.up)("InvoiceForm");return(0,i.wg)(),(0,i.iD)(i.HY,null,[N.companies.length>1?((0,i.wg)(),(0,i.iD)("div",l,[s,(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(N.companies,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"custom-control custom-radio custom-control-inline",key:e.id},[(0,i.wy)((0,i._)("input",{type:"radio",class:"custom-control-input",name:"company",required:"",value:e.id,id:"company-"+e.id,"onUpdate:modelValue":t[0]||(t[0]=e=>N.company=e)},null,8,c),[[a.G2,N.company]]),(0,i._)("label",{class:"custom-control-label",for:"company-"+e.id},(0,o.zw)(e.name),9,r)])))),128))]),d])):(0,i.kq)("",!0),(0,i._)("div",u,[(0,i._)("label",p,[(0,i.Uk)((0,o.zw)(I.t("Type of client")),1),m]),(0,i._)("div",null,[(0,i._)("div",_,[(0,i.wy)((0,i._)("input",{type:"radio",class:"custom-control-input",name:"client_type",value:"company",id:"id_client_type_0",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>N.clientType=e)},null,512),[[a.G2,N.clientType]]),(0,i._)("label",y,[h,(0,i.Uk)(" "+(0,o.zw)(I.t("company")),1)])]),(0,i._)("div",f,[(0,i.wy)((0,i._)("input",{type:"radio",class:"custom-control-input",name:"client_type",value:"person",id:"id_client_type_1",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>N.clientType=e)},null,512),[[a.G2,N.clientType]]),(0,i._)("label",v,[g,(0,i.Uk)(" "+(0,o.zw)(I.t("person")),1)])])])]),"person"==N.clientType?((0,i.wg)(),(0,i.iD)("section",w,[(0,i._)("fieldset",b,[C,(0,i.Wm)(q,{ref:"personForm","onUpdate:lastName":$.slugUpdate},null,8,["onUpdate:lastName"])])])):((0,i.wg)(),(0,i.iD)("section",k,[(0,i._)("fieldset",x,[U,(0,i.Wm)(L,{ref:"companyForm","onUpdate:name":$.slugUpdate},null,8,["onUpdate:name"])]),null!=e.selectedCompany?((0,i.wg)(),(0,i.iD)("dl",F,[D,(0,i._)("dd",null,(0,o.zw)(e.selectedCompany),1)])):(0,i.kq)("",!0)])),(0,i._)("section",null,[(0,i._)("fieldset",z,[T,(0,i.Wm)(S,{ref:"invoiceForm"},null,512)])]),(0,i._)("div",V,[(0,i._)("input",{type:"submit",name:"submit",value:"Enregistrer",class:"btn btn-primary button white",id:"submit-id-submit",onClick:t[3]||(t[3]=(0,a.iM)(((...e)=>$.saveClient&&$.saveClient(...e)),["prevent"]))})])],64)}const N={class:"form-row"},$={class:"col-md"},q={class:"form-group"},L=(0,i._)("label",{for:"id_first_name"},"Prénom du contact",-1),S={class:"col-md"},Z={class:"form-group"},E=(0,i._)("label",{for:"id_last_name"},"Nom du contact",-1),H={class:"form-group"},O=(0,i._)("label",{for:"id_address"},"Adresse",-1),P={class:"form-row"},j={class:"form-group"},W=(0,i._)("label",{for:"id_country"},"Pays",-1),A={class:"form-group"},Y=(0,i._)("label",{for:"id__email"},"E-mail",-1);function M(e,t,n,o,l,s){const c=(0,i.up)("city-auto-complete"),r=(0,i.up)("country-select");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",N,[(0,i._)("div",$,[(0,i._)("div",q,[L,(0,i.wy)((0,i._)("input",{type:"text",name:"first_name",maxlength:"255",class:"textinput textInput form-control",id:"id_first_name","onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),ref:"FirstName"},null,512),[[a.nr,l.firstName]])])]),(0,i._)("div",S,[(0,i._)("div",Z,[E,(0,i.wy)((0,i._)("input",{type:"text",name:"contact_last_name",maxlength:"255",class:"textinput textInput form-control",id:"id_last_name","onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e)},null,512),[[a.nr,l.lastName]])])])]),(0,i._)("div",H,[O,(0,i.wy)((0,i._)("textarea",{name:"address",cols:"40",rows:"2",class:"textarea form-control",id:"id_address","onUpdate:modelValue":t[2]||(t[2]=e=>l.address=e)},null,512),[[a.nr,l.address]])]),(0,i._)("div",P,[(0,i.Wm)(c,{city:l.city,"onUpdate:city":t[3]||(t[3]=e=>l.city=e),zipcode:l.zipCode,"onUpdate:zipcode":t[4]||(t[4]=e=>l.zipCode=e)},null,8,["city","zipcode"])]),(0,i._)("div",j,[W,(0,i.Wm)(r,{modelValue:l.country,"onUpdate:modelValue":t[5]||(t[5]=e=>l.country=e),country:l.country,topCountry:"CH",autocomplete:!0,"class-name":"form-control"},null,8,["modelValue","country"])]),(0,i._)("div",A,[Y,(0,i.wy)((0,i._)("input",{type:"email",name:"email",maxlength:"254",class:"emailinput form-control",id:"id_email","onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e)},null,512),[[a.nr,l.email]])])],64)}var R=n(4255),K=n.n(R);const G={class:"col-md-3"},Q={id:"div_id_zip_code",class:"form-group"},X=(0,i._)("label",{for:"id_zip_code"},"Code postal",-1),B={class:"input-group"},J=["onClick"],ee={class:"col-md-9"},te={id:"div_id_city",class:"form-group"},ne=(0,i._)("label",{for:"id_city"},"Localité",-1);function ae(e,t,n,l,s,c){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",G,[(0,i._)("div",Q,[X,(0,i._)("div",B,[(0,i.wy)((0,i._)("input",{type:"text",name:"zip_code",maxlength:"10",class:"textinput textInput form-control",id:"id_zip_code",onInput:t[0]||(t[0]=(...e)=>c.onZipcodeInput&&c.onZipcodeInput(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.localZipcode=e)},null,544),[[a.nr,s.localZipcode]]),(0,i._)("ul",{class:(0,o.C_)(["dropdown-menu shadow",{show:c.isCitiesDropdownVisible}]),ref:"dropdown"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.cities,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i._)("a",{class:"dropdown-item",onClick:t=>c.onCitySelected(e)},(0,o.zw)(e),9,J)])))),128))],2)])])]),(0,i._)("div",ee,[(0,i._)("div",te,[ne,(0,i.wy)((0,i._)("input",{type:"text",name:"city",maxlength:"255",class:"textinput textInput form-control",id:"id_city","onUpdate:modelValue":t[2]||(t[2]=e=>s.localCity=e)},null,512),[[a.nr,s.localCity]])])])],64)}var ie=n(6321),oe={name:"CityAutoComplete.vue",props:{zipcode:String,city:String},computed:{isCitiesDropdownVisible(){return this.cities.length>0}},data(){return{localCity:this.city,localZipcode:this.zipcode,cities:[]}},methods:{onCitySelected(e){this.localCity=e,this.cities=[]},onZipcodeInput(){""===this.localCity&&(this.localZipcode.length<3||(this.cities=(0,ie.cityFromZip)(this.localZipcode),1===this.cities.length&&(this.localCity=this.cities[0],this.cities=[])))},onWindowClick(e){this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&(this.cities=[])}},watch:{localCity(){this.$emit("update:city",this.city)},localZipcode(){this.$emit("update:zipcode",this.zipcode)},city(e){this.localCity=e},zipcode(e){this.localZipcode=e}},mounted(){window.addEventListener("click",this.onWindowClick)},beforeUnmount(){window.removeEventListener("click",this.onWindowClick)}},le=n(89);const se=(0,le.Z)(oe,[["render",ae]]);var ce=se,re={name:"PersonForm",components:{CountrySelect:R.CountrySelect,CityAutoComplete:ce},data(){return{client:{},firstName:"",lastName:"",address:"",country:"",city:"",zipCode:"",email:""}},methods:{onSelect(e){console.log(e)}},watch:{lastName(e){this.$emit("update:lastName",e)}}};const de=(0,le.Z)(re,[["render",M]]);var ue=de;const pe={id:"div_id_company_name",class:"form-group"},me=(0,i._)("label",{for:"id_company_name",class:"requiredField"},[(0,i.Uk)(" Nom de l'entreprise "),(0,i._)("span",{class:"asteriskField"},"*")],-1),_e={id:"div_id_address",class:"form-group"},ye=(0,i._)("label",{for:"id_address"},"Adresse",-1),he={class:"form-row"},fe={id:"div_id_country",class:"form-group"},ve=(0,i._)("label",{for:"id_country"},"Pays",-1),ge=(0,i._)("hr",null,null,-1),we={class:"form-row"},be={class:"col-md"},Ce={id:"div_id_contact_first_name",class:"form-group"},ke=(0,i._)("label",{for:"id_contact_first_name"},"Prénom du contact",-1),xe={class:"col-md"},Ue={id:"div_id_contact_last_name",class:"form-group"},Fe=(0,i._)("label",{for:"id_contact_last_name"},"Nom du contact",-1),De={id:"div_id_contact_email",class:"form-group"},ze=(0,i._)("label",{for:"id_contact_email"},"E-mail de contact",-1);function Te(e,t,n,o,l,s){const c=(0,i.up)("company-search"),r=(0,i.up)("city-auto-complete"),d=(0,i.up)("country-select");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(c,{append:"toto",placeholder:"company lookup",autocompleteUrl:"/api/companies-search/",companyDetailUrl:"/api/company-detail/",onCallback:s.companyDetailLookupResult},null,8,["onCallback"]),(0,i._)("div",pe,[me,(0,i.wy)((0,i._)("input",{type:"text",name:"company_name",maxlength:"255",class:"textinput textInput form-control",id:"id_company_name",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>l.name=e)},null,512),[[a.nr,l.name]])]),(0,i._)("div",_e,[ye,(0,i.wy)((0,i._)("textarea",{name:"address",cols:"40",rows:"2",class:"textarea form-control",id:"id_address","onUpdate:modelValue":t[1]||(t[1]=e=>l.address=e)},null,512),[[a.nr,l.address]])]),(0,i._)("div",he,[(0,i.Wm)(r,{city:l.city,"onUpdate:city":t[2]||(t[2]=e=>l.city=e),zipcode:l.zipcode,"onUpdate:zipcode":t[3]||(t[3]=e=>l.zipcode=e)},null,8,["city","zipcode"])]),(0,i._)("div",fe,[ve,(0,i.Wm)(d,{modelValue:l.country,"onUpdate:modelValue":t[4]||(t[4]=e=>l.country=e),country:l.country,topCountry:"CH",autocomplete:!0,"class-name":"form-control"},null,8,["modelValue","country"])]),ge,(0,i._)("div",we,[(0,i._)("div",be,[(0,i._)("div",Ce,[ke,(0,i.wy)((0,i._)("input",{type:"text",name:"contact_first_name",maxlength:"255",class:"textinput textInput form-control",id:"id_contact_first_name","onUpdate:modelValue":t[5]||(t[5]=e=>l.contactFirstName=e),ref:"contactFirstName"},null,512),[[a.nr,l.contactFirstName]])])]),(0,i._)("div",xe,[(0,i._)("div",Ue,[Fe,(0,i.wy)((0,i._)("input",{type:"text",name:"contact_last_name",maxlength:"255",class:"textinput textInput form-control",id:"id_contact_last_name","onUpdate:modelValue":t[6]||(t[6]=e=>l.contactLastName=e)},null,512),[[a.nr,l.contactLastName]])])])]),(0,i._)("div",De,[ze,(0,i.wy)((0,i._)("input",{type:"email",name:"contact_email",maxlength:"254",class:"emailinput form-control",id:"id_contact_email","onUpdate:modelValue":t[7]||(t[7]=e=>l.contactEmail=e)},null,512),[[a.nr,l.contactEmail]])])],64)}const Ve=e=>((0,i.dD)("data-v-5246af19"),e=e(),(0,i.Cn)(),e),Ie={class:"input-group"},Ne=["placeholder"],$e={class:"input-group-append"},qe={class:"input-group-text"},Le=Ve((()=>(0,i._)("i",{class:"bi bi-search"},null,-1))),Se=["onClick"];function Ze(e,t,n,l,s,c){return(0,i.wg)(),(0,i.iD)("div",Ie,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchTerm=e),placeholder:n.placeholder,onInput:t[1]||(t[1]=(...e)=>c.companyLookup&&c.companyLookup(...e)),onFocus:t[2]||(t[2]=e=>s.isFocused=!0)},null,40,Ne),[[a.nr,s.searchTerm]]),(0,i._)("div",$e,[(0,i.WI)(e.$slots,"appendText",{},(()=>[(0,i._)("span",qe,[Le,(0,i.Uk)(" "+(0,o.zw)(n.appendText),1)])]),!0)]),(0,i._)("div",{class:(0,o.C_)(["dropdown-menu shadow",{show:c.isDropdownVisible}])},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.data,(e=>((0,i.wg)(),(0,i.iD)("a",{class:"dropdown-item",key:e.uid,onClick:t=>c.companyDetailLookup(e.uid)},(0,o.zw)(e.name)+", "+(0,o.zw)(e.city),9,Se)))),128))],2)])}var Ee={name:"CompanySearch",computed:{isDropdownVisible(){return this.data.length>0}},data(){return{isFocused:!1,searchTerm:"",data:[],selectedCompany:null}},methods:{companyLookup(){this.searchTerm.length<3||this.$http.get(this.autocompleteUrl,{params:{q:this.searchTerm}}).then((e=>{this.data=e.data})).catch((e=>{console.log(e)}))},companyDetailLookup(e){this.$http.get(this.companyDetailUrl,{params:{uid:e}}).then((e=>{this.selectedCompany=e.data,this.onCallback(this.selectedCompany)})).catch((e=>{console.log(e)})),this.isFocused=!1,this.searchTerm="",this.data=[]}},props:{appendText:String,autocompleteUrl:URL,companyDetailUrl:URL,onCallback:{type:Function,required:!0},placeholder:String}};const He=(0,le.Z)(Ee,[["render",Ze],["__scopeId","data-v-5246af19"]]);var Oe=He,Pe={name:"CompanyForm",components:{CompanySearch:Oe,CountrySelect:K(),CityAutoComplete:ce},data(){return{name:"",address:"",country:"CH",zipcode:"",cities:[],city:"",contactFirstName:"",contactLastName:"",contactEmail:""}},methods:{companyDetailLookupResult(e){this.name=e.name,this.address=e.address,this.country=e.country,this.city=e.city,this.zipcode=e.zip_code,this.$refs.contactFirstName.focus()},onSelect(e){console.log(e)},save(e){this.$http.patch(`/api/clients/${e}/`,{company_name:this.name,address:this.address,country:this.country,city:this.city,zip_code:this.zipcode,contact_first_name:this.contactFirstName,contact_last_name:this.contactLastName,contact_email:this.contactEmail}).then((e=>{this.$emit("company-saved",e.data)}))},setClient(e){this.name=e.company_name,this.address=e.address,this.country=e.country,this.city=e.city,this.zipcode=e.zip_code,this.contactFirstName=e.contact_first_name,this.contactLastName=e.contact_last_name,this.contactEmail=e.contact_email}},watch:{name(e){this.$emit("update:name",e)}}};const je=(0,le.Z)(Pe,[["render",Te]]);var We=je;const Ae={class:"form-row"},Ye={class:"col-md"},Me={id:"div_id_currency",class:"form-group"},Re=(0,i._)("label",{for:"id_currency",class:"requiredField"},[(0,i.Uk)("Devise"),(0,i._)("span",{class:"asteriskField"},"*")],-1),Ke=["value"],Ge={class:"col-md"},Qe={id:"div_id_vat_rate",class:"form-group"},Xe=(0,i._)("label",{for:"id_vat_rate",class:""},"Taux de TVA",-1),Be=(0,i.uE)('<div class="col-md"><div id="div_id_default_hourly_rate" class="form-group"><label for="id_default_hourly_rate" class="requiredField"> Tarif horaire par défaut<span class="asteriskField">*</span></label><input type="number" name="default_hourly_rate" value="0.00" step="0.01" class="numberinput form-control" required="" id="id_default_hourly_rate"></div></div>',1),Je={id:"div_id_language",class:"form-group"},et=(0,i._)("label",{for:"id_language",class:"requiredField"},[(0,i.Uk)("Langue"),(0,i._)("span",{class:"asteriskField"},"*")],-1),tt=["value"],nt={id:"div_id_payment_delay_days",class:"form-group"},at=(0,i._)("label",{for:"id_payment_delay_days",class:"requiredField"},[(0,i.Uk)(" Délai de paiement"),(0,i._)("span",{class:"asteriskField"},"*")],-1),it=(0,i._)("small",{id:"hint_id_payment_delay_days",class:"form-text text-muted"}," Délai par défaut en jours jusqu'à la date d'échéance ",-1),ot=(0,i._)("hr",null,null,-1),lt={class:"form-row"},st={class:"col-md"},ct=(0,i._)("label",{for:"exampleInvoiceCode"},"Prochain code de facture",-1),rt={key:0,class:"form-control-static",id:"exampleInvoiceCode"},dt={key:1},ut={class:"col-md"},pt={id:"div_id_slug",class:"form-group"},mt=(0,i._)("label",{for:"id_slug",class:"requiredField"},[(0,i.Uk)(" Slug"),(0,i._)("span",{class:"asteriskField"},"*")],-1),_t=(0,i._)("small",{id:"hint_id_slug",class:"form-text text-muted"}," Utilisé pour générer le code de la facture ",-1),yt={class:"col-md"},ht={id:"div_id_invoice_current_count",class:"form-group"},ft=(0,i._)("label",{for:"id_invoice_current_count",class:"requiredField"},[(0,i.Uk)(" Décompte actuel de factures"),(0,i._)("span",{class:"asteriskField"},"*")],-1),vt=(0,i._)("small",{id:"hint_id_invoice_current_count",class:"form-text text-muted"}," Utilisé pour générer le code de la facture",-1);function gt(e,t,n,l,s,c){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Ae,[(0,i._)("div",Ye,[(0,i._)("div",Me,[Re,(0,i.wy)((0,i._)("select",{name:"currency",class:"select custom-select",id:"id_currency","onUpdate:modelValue":t[0]||(t[0]=e=>s.currency=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.currencies,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.value,value:e.value},(0,o.zw)(e.text),9,Ke)))),128))],512),[[a.bM,s.currency]])])]),(0,i._)("div",Ge,[(0,i._)("div",Qe,[Xe,(0,i.wy)((0,i._)("input",{type:"number",name:"vat_rate",step:"0.0001",class:"numberinput form-control",id:"id_vat_rate","onUpdate:modelValue":t[1]||(t[1]=e=>s.vat_rate=e)},null,512),[[a.nr,s.vat_rate]])])]),Be]),(0,i._)("div",Je,[et,(0,i.wy)((0,i._)("select",{name:"language",class:"select custom-select",id:"id_language","onUpdate:modelValue":t[2]||(t[2]=e=>s.language=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.languages,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.value,value:e.value},(0,o.zw)(e.text),9,tt)))),128))],512),[[a.bM,s.language]])]),(0,i._)("div",nt,[at,(0,i.wy)((0,i._)("input",{type:"number",name:"payment_delay_days",class:"numberinput form-control",required:"",id:"id_payment_delay_days","onUpdate:modelValue":t[3]||(t[3]=e=>s.paymentDelayDays=e)},null,512),[[a.nr,s.paymentDelayDays]]),it]),ot,(0,i._)("div",lt,[(0,i._)("div",st,[ct,s.slug?((0,i.wg)(),(0,i.iD)("p",rt,(0,o.zw)(s.slug)+"-"+(0,o.zw)(s.invoiceCurrentCount+1),1)):((0,i.wg)(),(0,i.iD)("p",dt,"n/a"))]),(0,i._)("div",ut,[(0,i._)("div",pt,[mt,(0,i.wy)((0,i._)("input",{type:"text",name:"slug",maxlength:"15",class:"textinput textInput form-control",required:"",id:"id_slug","onUpdate:modelValue":t[4]||(t[4]=e=>s.slug=e)},null,512),[[a.nr,s.slug]]),_t])]),(0,i._)("div",yt,[(0,i._)("div",ht,[ft,(0,i.wy)((0,i._)("input",{type:"number",name:"invoice_current_count",class:"numberinput form-control",required:"",id:"id_invoice_current_count","onUpdate:modelValue":t[5]||(t[5]=e=>s.invoiceCurrentCount=e)},null,512),[[a.nr,s.invoiceCurrentCount]]),vt])])])],64)}var wt=n(6749),bt=n.n(wt),Ct={name:"InvoiceForm.vue",data(){return{currency:"CHF",invoiceCurrentCount:0,language:"fr",paymentDelayDays:30,slug:"",vat_rate:.077,currencies:[{value:"CHF",text:"CHF"},{value:"EUR",text:"Euro"}],languages:[{value:"en",text:"English"},{value:"de",text:"Deutsch"},{value:"fr",text:"Français"},{value:"it",text:"Italiano"}]}},methods:{setClient(e){this.currency=e.currency,this.invoiceCurrentCount=e.invoice_current_count,this.language=e.language,this.paymentDelayDays=e.payment_delay_days,this.slug=e.slug,this.vat_rate=e.vat_rate},save(e){this.$http.patch(`/api/clients/${e}/`,{currency:this.currency,invoice_current_count:this.invoiceCurrentCount,language:this.language,payment_delay_days:this.paymentDelayDays,slug:this.slug,vat_rate:this.vat_rate}).then((e=>{this.$emit("company-saved",e.data)}))},slugUpdate(e){this.slug=bt()(e,{lower:!0,strict:!0})}},props:{defaultLanguage:{type:String,default:"fr",required:!1}}};const kt=(0,le.Z)(Ct,[["render",gt]]);var xt=kt,Ut=n(5658),Ft={name:"App",components:{PersonForm:ue,CompanyForm:We,InvoiceForm:xt},created(){this.$http.get("/api/companies/").then((e=>{this.companies=e.data.results,1==this.companies.length&&(this.company=this.companies[0].id)})).catch((e=>{console.log(e)}))},data(){return{clientType:"company",slug:"",client:null,clientId:null,companies:[],company:""}},methods:{async saveClient(){if(null===this.clientId)try{const e={client_type:this.clientType,company:this.company},t=await this.$http.post("/api/clients/",e);console.log(t),this.clientId=t.data.id}catch(e){console.log(e)}null!==this.clientId&&(await this.$nextTick(),"company"===this.clientType?this.$refs.companyForm.save(this.clientId):this.$refs.personForm.savePerson(this.clientId),this.$refs.invoiceForm.save(this.clientId))},slugUpdate(e){this.slug=bt()(e,{lower:!0,strict:!0})}},mounted(){const e=window.location.pathname,t=e.match(/\/clients\/([\da-fA-F]{8}-([\da-fA-F]{4}-){3}[\da-fA-F]{12})\/edit/);t&&(this.clientId=t[1],this.$http.get(`/api/clients/${this.clientId}/`).then((e=>{this.client=e.data,this.clientType=this.client.client_type,this.company=this.client.company,this.$refs.companyForm.setClient(this.client),this.$refs.invoiceForm.setClient(this.client)})).catch((e=>{console.log(e)})))},setup(){const{t:e}=(0,Ut.QT)({inheritLocale:!0,useScope:"local"});return{t:e}}};function Dt(e){e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{fr:{company:e=>{const{normalize:t}=e;return t(["Entreprise"])},person:e=>{const{normalize:t}=e;return t(["Personne"])},"Type of client":e=>{const{normalize:t}=e;return t(["Type de client"])}},en:{company:e=>{const{normalize:t}=e;return t(["Company"])},person:e=>{const{normalize:t}=e;return t(["Person"])},"Type of client":e=>{const{normalize:t}=e;return t(["Type of client"])}}}})}"function"===typeof Dt&&Dt(Ft);const zt=(0,le.Z)(Ft,[["render",I]]);var Tt=zt;function Vt(){const e=n(6406),t={};return e.keys().forEach((n=>{const a=n.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){const i=a[1];t[i]=e(n).default}})),t}var It=(0,Ut.o)({legacy:!1,locale:"fr",fallbackLocale:"en",messages:Vt()}),Nt=n(5454),$t=n(5269),qt=n.n($t);Nt.Z.get("/api/csrf-token/").then((e=>{const t=e.data.csrf_token;Nt.Z.defaults.headers.common["X-CSRFToken"]=t}));const Lt=(0,a.ri)(Tt);Lt.config.globalProperties.$http=Nt.Z,Lt.use(It).use(qt()).mount("#app")},6406:function(e,t,n){var a={"./en.json":3482};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=o,e.exports=i,i.id=6406}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,o){if(!a){var l=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],o=e[d][2];for(var s=!0,c=0;c<a.length;c++)(!1&o||l>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[c])}))?a.splice(c--,1):(s=!1,o<l&&(l=o));if(s){e.splice(d--,1);var r=i();void 0!==r&&(t=r)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,i,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,o,l=a[0],s=a[1],c=a[2],r=0;if(l.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(c)var d=c(n)}for(t&&t(a);r<l.length;r++)o=l[r],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},a=self["webpackChunkclients"]=self["webpackChunkclients"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(4232)}));a=n.O(a)})();
//# sourceMappingURL=app.e7ccf2aa.js.map
