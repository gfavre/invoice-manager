(function(){var e={7480:function(e,t,n){"use strict";n.r(t),t["default"]={"Client for":e=>{const{normalize:t}=e;return t(["Kunde für"])},"Type of client":e=>{const{normalize:t}=e;return t(["Kundentyp"])},Company:e=>{const{normalize:t}=e;return t(["Firma"])},Person:e=>{const{normalize:t}=e;return t(["Person"])},Invoices:e=>{const{normalize:t}=e;return t(["Rechnungen"])},"First name":e=>{const{normalize:t}=e;return t(["Vorname"])},"Last name":e=>{const{normalize:t}=e;return t(["Nachname"])},Address:e=>{const{normalize:t}=e;return t(["Adresse"])},Country:e=>{const{normalize:t}=e;return t(["Land"])},City:e=>{const{normalize:t}=e;return t(["Stadt"])},"Postal code":e=>{const{normalize:t}=e;return t(["Postleitzahl"])},"Search on company register":e=>{const{normalize:t}=e;return t(["Suche im Firmenregister"])},"Company name":e=>{const{normalize:t}=e;return t(["Firmenname"])},"Contact's first name":e=>{const{normalize:t}=e;return t(["Vorname des Ansprechpartners"])},"Contact's last name":e=>{const{normalize:t}=e;return t(["Nachname des Ansprechpartners"])},"Contact's email":e=>{const{normalize:t}=e;return t(["E-Mail-Adresse des Ansprechpartners"])},Currency:e=>{const{normalize:t}=e;return t(["Währung"])},"VAT rate":e=>{const{normalize:t}=e;return t(["Mehrwertsteuersatz"])},"Default hourly rate":e=>{const{normalize:t}=e;return t(["Standard-Stundensatz"])},Language:e=>{const{normalize:t}=e;return t(["Sprache"])},"Payment delay":e=>{const{normalize:t}=e;return t(["Zahlungsfrist"])},"Default delay in days to due date":e=>{const{normalize:t}=e;return t(["Standardzahlungsfrist in Tagen"])},"Next invoice code":e=>{const{normalize:t}=e;return t(["Nächster Rechnungscode"])},Slug:e=>{const{normalize:t}=e;return t(["Kunden-Code"])},"Used to generate invoice code":e=>{const{normalize:t}=e;return t(["Zur Generierung des Rechnungscodes verwendet"])},"Current count of invoices":e=>{const{normalize:t}=e;return t(["Aktuelle Anzahl von Rechnungen"])}}},3482:function(e,t,n){"use strict";n.r(t),t["default"]={"Client for":e=>{const{normalize:t}=e;return t(["Client for"])}}},5627:function(e,t,n){"use strict";n.r(t),t["default"]={"Client for":e=>{const{normalize:t}=e;return t(["Client pour"])},"Type of client":e=>{const{normalize:t}=e;return t(["Type de client"])},Company:e=>{const{normalize:t}=e;return t(["Entreprise"])},Person:e=>{const{normalize:t}=e;return t(["Personne"])},Invoices:e=>{const{normalize:t}=e;return t(["Factures"])},"First name":e=>{const{normalize:t}=e;return t(["Prénom"])},"Last name":e=>{const{normalize:t}=e;return t(["Nom"])},Address:e=>{const{normalize:t}=e;return t(["Adresse"])},Country:e=>{const{normalize:t}=e;return t(["Pays"])},City:e=>{const{normalize:t}=e;return t(["Localité"])},"Postal code":e=>{const{normalize:t}=e;return t(["Code postal"])},"Search on company register":e=>{const{normalize:t}=e;return t(["Rechercher dans le registre du commerce"])},"Company name":e=>{const{normalize:t}=e;return t(["Nom de l'entreprise"])},"Contact's first name":e=>{const{normalize:t}=e;return t(["Prénom du contact"])},"Contact's last name":e=>{const{normalize:t}=e;return t(["Nom du contact"])},"Contact's email":e=>{const{normalize:t}=e;return t(["Email du contact"])},Currency:e=>{const{normalize:t}=e;return t(["Devise"])},"VAT rate":e=>{const{normalize:t}=e;return t(["Taux de TVA"])},"Default hourly rate":e=>{const{normalize:t}=e;return t(["Tarif horaire par défaut"])},Language:e=>{const{normalize:t}=e;return t(["Langue"])},"Payment delay":e=>{const{normalize:t}=e;return t(["Délai de paiement"])},"Default delay in days to due date":e=>{const{normalize:t}=e;return t(["Délai par défaut en jours pour la date d'échéance"])},"Next invoice code":e=>{const{normalize:t}=e;return t(["Code de la prochaine facture"])},Slug:e=>{const{normalize:t}=e;return t(["Code client"])},"Used to generate invoice code":e=>{const{normalize:t}=e;return t(["Utilisé pour générer le code de la facture"])},"Current count of invoices":e=>{const{normalize:t}=e;return t(["Décompte actuel de factures"])}}},2997:function(e,t,n){"use strict";var a=n(9242),o=n(3396),i=n(7139);const r={key:0,id:"div_id_company",class:"form-group"},s={for:"id_company_0",class:"requiredField"},l=(0,o._)("span",{class:"asteriskField"},"*",-1),c=["value","id"],d=["for"],u=(0,o._)("hr",null,null,-1),m={id:"div_id_client_type",class:"form-group"},p={for:"id_client_type_0",class:"requiredField"},_=(0,o._)("span",{class:"asteriskField"},"*",-1),y={class:"custom-control custom-radio custom-control-inline"},h={class:"custom-control-label",for:"id_client_type_0"},f=(0,o._)("i",{class:"bi bi-journal"},null,-1),v={class:"custom-control custom-radio custom-control-inline"},g={class:"custom-control-label",for:"id_client_type_1"},w=(0,o._)("i",{class:"bi bi-person-fill"},null,-1),C={class:"border-left-info shadow",id:"company_infos"},z={class:"mb-1"},b={class:"border-left-primary shadow",id:"company_infos"},F={class:"mb-1"},k={class:"border-left-success shadow"},x={class:"mb-1"},$={class:"buttonHolder"};function U(e,t,n,U,D,S){const T=(0,o.up)("person-form"),N=(0,o.up)("company-form"),V=(0,o.up)("InvoiceForm");return(0,o.wg)(),(0,o.iD)(o.HY,null,[D.companies.length>1?((0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("label",s,[(0,o.Uk)((0,i.zw)(e.$t("Client for")),1),l]),(0,o._)("div",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(D.companies,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"custom-control custom-radio custom-control-inline",key:e.id},[(0,o.wy)((0,o._)("input",{type:"radio",class:"custom-control-input",name:"company",required:"",value:e.id,id:"company-"+e.id,"onUpdate:modelValue":t[0]||(t[0]=e=>D.company=e)},null,8,c),[[a.G2,D.company]]),(0,o._)("label",{class:"custom-control-label",for:"company-"+e.id},(0,i.zw)(e.name),9,d)])))),128))]),u])):(0,o.kq)("",!0),(0,o._)("div",m,[(0,o._)("label",p,[(0,o.Uk)((0,i.zw)(e.$t("Type of client")),1),_]),(0,o._)("div",null,[(0,o._)("div",y,[(0,o.wy)((0,o._)("input",{type:"radio",class:"custom-control-input",name:"client_type",value:"company",id:"id_client_type_0",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>D.clientType=e)},null,512),[[a.G2,D.clientType]]),(0,o._)("label",h,[f,(0,o.Uk)(" "+(0,i.zw)(e.$t("Company")),1)])]),(0,o._)("div",v,[(0,o.wy)((0,o._)("input",{type:"radio",class:"custom-control-input",name:"client_type",value:"person",id:"id_client_type_1",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>D.clientType=e)},null,512),[[a.G2,D.clientType]]),(0,o._)("label",g,[w,(0,o.Uk)(" "+(0,i.zw)(e.$t("Person")),1)])])])]),(0,o.wy)((0,o._)("section",null,[(0,o._)("fieldset",C,[(0,o._)("legend",z,(0,i.zw)(e.$t("Person")),1),(0,o.Wm)(T,{ref:"personForm","onUpdate:lastName":S.slugUpdate},null,8,["onUpdate:lastName"])])],512),[[a.F8,S.isPerson]]),(0,o.wy)((0,o._)("section",null,[(0,o._)("fieldset",b,[(0,o._)("legend",F,(0,i.zw)(e.$t("Company")),1),(0,o.Wm)(N,{ref:"companyForm","onUpdate:name":S.slugUpdate},null,8,["onUpdate:name"])])],512),[[a.F8,S.isCompany]]),(0,o._)("section",null,[(0,o._)("fieldset",k,[(0,o._)("legend",x,(0,i.zw)(e.$t("Invoices")),1),(0,o.Wm)(V,{ref:"invoiceForm",onCompanySaved:S.handleCompanySaved,"updated-slug":D.slug},null,8,["onCompanySaved","updated-slug"])])]),(0,o._)("div",$,[(0,o._)("input",{type:"submit",name:"submit",value:"Enregistrer",class:(0,i.C_)(["btn btn-primary button white",{disabled:!e.isSaveable}]),id:"submit-id-submit",onClick:t[3]||(t[3]=(0,a.iM)(((...e)=>S.saveClient&&S.saveClient(...e)),["prevent"]))},null,2)])],64)}const D={class:"form-row"},S={class:"col-md"},T={class:"form-group"},N={for:"id_first_name",class:"requiredField"},V=(0,o._)("span",{class:"asteriskField"},"*",-1),L={class:"col-md"},I={class:"form-group"},q={for:"id_last_name",class:"requiredField"},P=(0,o._)("span",{class:"asteriskField"},"*",-1),A={class:"form-group"},H={for:"id_address"},R={class:"form-row"},Z={class:"form-group"},E=(0,o._)("label",{for:"id_country"},"Pays",-1),O={class:"form-group"},W=(0,o._)("label",{for:"id__email"},"E-mail",-1);function j(e,t,n,r,s,l){const c=(0,o.up)("city-auto-complete"),d=(0,o.up)("country-select");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",D,[(0,o._)("div",S,[(0,o._)("div",T,[(0,o._)("label",N,[(0,o.Uk)((0,i.zw)(e.$t("First name"))+" ",1),V]),(0,o.wy)((0,o._)("input",{type:"text",name:"first_name",maxlength:"255",class:"textinput textInput form-control",id:"id_first_name","onUpdate:modelValue":t[0]||(t[0]=e=>s.firstName=e),ref:"FirstName",required:"required"},null,512),[[a.nr,s.firstName]])])]),(0,o._)("div",L,[(0,o._)("div",I,[(0,o._)("label",q,[(0,o.Uk)((0,i.zw)(e.$t("Last name"))+" ",1),P]),(0,o.wy)((0,o._)("input",{type:"text",name:"contact_last_name",maxlength:"255",required:"required",class:"textinput textInput form-control",id:"id_last_name","onUpdate:modelValue":t[1]||(t[1]=e=>s.lastName=e)},null,512),[[a.nr,s.lastName]])])])]),(0,o._)("div",A,[(0,o._)("label",H,(0,i.zw)(e.$t("Address")),1),(0,o.wy)((0,o._)("textarea",{name:"address",cols:"40",rows:"2",class:"textarea form-control",id:"id_address","onUpdate:modelValue":t[2]||(t[2]=e=>s.address=e)},null,512),[[a.nr,s.address]])]),(0,o._)("div",R,[(0,o.Wm)(c,{city:s.city,"onUpdate:city":t[3]||(t[3]=e=>s.city=e),zipcode:s.zipCode,"onUpdate:zipcode":t[4]||(t[4]=e=>s.zipCode=e),"city-label":e.$t("City"),"zipcode-label":e.$t("Postal code")},null,8,["city","zipcode","city-label","zipcode-label"])]),(0,o._)("div",Z,[E,(0,o.Wm)(d,{modelValue:s.country,"onUpdate:modelValue":t[5]||(t[5]=e=>s.country=e),country:s.country,topCountry:"CH",autocomplete:!0,"class-name":"form-control"},null,8,["modelValue","country"])]),(0,o._)("div",O,[W,(0,o.wy)((0,o._)("input",{type:"email",name:"email",maxlength:"254",class:"emailinput form-control",id:"id_email","onUpdate:modelValue":t[6]||(t[6]=e=>s.email=e)},null,512),[[a.nr,s.email]])])],64)}const Y={class:"col-md-3"},M={id:"div_id_zip_code",class:"form-group"},K={for:"id_zip_code"},G={class:"input-group"},Q=["onClick"],X={class:"col-md-9"},B={id:"div_id_city",class:"form-group"},J={for:"id_city"};function ee(e,t,n,r,s,l){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Y,[(0,o._)("div",M,[(0,o._)("label",K,(0,i.zw)(n.zipcodeLabel),1),(0,o._)("div",G,[(0,o.wy)((0,o._)("input",{type:"text",name:"zip_code",maxlength:"10",class:"textinput textInput form-control",id:"id_zip_code",onInput:t[0]||(t[0]=(...e)=>l.onZipcodeInput&&l.onZipcodeInput(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.localZipcode=e)},null,544),[[a.nr,s.localZipcode]]),(0,o._)("ul",{class:(0,i.C_)(["dropdown-menu shadow",{show:l.isCitiesDropdownVisible}]),ref:"dropdown"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.cities,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o._)("a",{class:"dropdown-item",onClick:t=>l.onCitySelected(e)},(0,i.zw)(e),9,Q)])))),128))],2)])])]),(0,o._)("div",X,[(0,o._)("div",B,[(0,o._)("label",J,(0,i.zw)(n.cityLabel),1),(0,o.wy)((0,o._)("input",{type:"text",name:"city",maxlength:"255",class:"textinput textInput form-control",id:"id_city","onUpdate:modelValue":t[2]||(t[2]=e=>s.localCity=e)},null,512),[[a.nr,s.localCity]])])])],64)}var te=n(6321),ne={name:"CityAutoComplete.vue",props:{zipcode:String,city:String,zipcodeLabel:{type:String,required:!0},cityLabel:{type:String,required:!0}},computed:{isCitiesDropdownVisible(){return this.cities.length>0}},data(){return{localCity:this.city,localZipcode:this.zipcode,cities:[]}},methods:{onCitySelected(e){this.localCity=e,this.cities=[]},onZipcodeInput(){""===this.localCity&&(this.localZipcode.length<3||(this.cities=(0,te.cityFromZip)(this.localZipcode),1===this.cities.length&&(this.localCity=this.cities[0],this.cities=[])))},onWindowClick(e){this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&(this.cities=[])}},watch:{localCity(){this.$emit("update:city",this.city)},localZipcode(){this.$emit("update:zipcode",this.zipcode)},city(e){this.localCity=e},zipcode(e){this.localZipcode=e}},mounted(){window.addEventListener("click",this.onWindowClick)},beforeUnmount(){window.removeEventListener("click",this.onWindowClick)}},ae=n(89);const oe=(0,ae.Z)(ne,[["render",ee]]);var ie=oe,re=n(4255),se=n(5658),le={name:"PersonForm",components:{CountrySelect:re.CountrySelect,CityAutoComplete:ie},data(){return{client:{},firstName:"",lastName:"",address:"",country:"",city:"",zipCode:"",email:""}},methods:{isFormComplete(){return this.firstName&&this.lastName},onSelect(e){console.log(e)},setClient(e){this.client=e,this.firstName=e.contact_first_name,this.lastName=e.contact_last_name,this.address=e.address,this.country=e.country,this.city=e.city,this.zipCode=e.zip_code,this.email=e.contact_email},save(e){this.$http.patch(`/api/clients/${e}/`,{contact_first_name:this.firstName,contact_last_name:this.lastName,contact_email:this.email,address:this.address,city:this.city,zip_code:this.zipCode,country:this.country,client_type:"person"}).then((e=>{this.$emit("company-saved",e.data)}))}},setup(){const{t:e}=(0,se.QT)();return{t:e}},watch:{lastName(e){this.$emit("update:lastName",e)}}};const ce=(0,ae.Z)(le,[["render",j]]);var de=ce;const ue={class:"form-row"},me={class:"col-md-6"},pe=(0,o._)("hr",null,null,-1),_e={id:"div_id_company_name",class:"form-group"},ye={for:"id_company_name",class:"requiredField"},he=(0,o._)("span",{class:"asteriskField"},"*",-1),fe={id:"div_id_address",class:"form-group"},ve={for:"id_address"},ge={class:"form-row"},we={id:"div_id_country",class:"form-group"},Ce={for:"id_country"},ze=(0,o._)("hr",null,null,-1),be={class:"form-row"},Fe={class:"col-md"},ke={id:"div_id_contact_first_name",class:"form-group"},xe={for:"id_contact_first_name"},$e={class:"col-md"},Ue={id:"div_id_contact_last_name",class:"form-group"},De={for:"id_contact_last_name"},Se={id:"div_id_contact_email",class:"form-group"},Te={for:"id_contact_email"};function Ne(e,t,n,r,s,l){const c=(0,o.up)("company-search"),d=(0,o.up)("city-auto-complete"),u=(0,o.up)("country-select");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",ue,[(0,o._)("div",me,[(0,o.Wm)(c,{autocompleteUrl:"/api/companies-search/",companyDetailUrl:"/api/company-detail/",placeholder:e.$t("Search on company register"),onCallback:l.companyDetailLookupResult},null,8,["placeholder","onCallback"])])]),pe,(0,o._)("div",_e,[(0,o._)("label",ye,[(0,o.Uk)((0,i.zw)(e.$t("Company name"))+" ",1),he]),(0,o.wy)((0,o._)("input",{type:"text",name:"company_name",maxlength:"255",class:"textinput textInput form-control",id:"id_company_name",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>s.name=e)},null,512),[[a.nr,s.name]])]),(0,o._)("div",fe,[(0,o._)("label",ve,(0,i.zw)(e.$t("Address")),1),(0,o.wy)((0,o._)("textarea",{name:"address",cols:"40",rows:"2",class:"textarea form-control",id:"id_address","onUpdate:modelValue":t[1]||(t[1]=e=>s.address=e)},null,512),[[a.nr,s.address]])]),(0,o._)("div",ge,[(0,o.Wm)(d,{city:s.city,"onUpdate:city":t[2]||(t[2]=e=>s.city=e),zipcode:s.zipcode,"onUpdate:zipcode":t[3]||(t[3]=e=>s.zipcode=e),"city-label":e.$t("City"),"zipcode-label":e.$t("Postal code")},null,8,["city","zipcode","city-label","zipcode-label"])]),(0,o._)("div",we,[(0,o._)("label",Ce,(0,i.zw)(e.$t("Country")),1),(0,o.Wm)(u,{modelValue:s.country,"onUpdate:modelValue":t[4]||(t[4]=e=>s.country=e),country:s.country,topCountry:"CH",autocomplete:!0,"class-name":"form-control"},null,8,["modelValue","country"])]),ze,(0,o._)("div",be,[(0,o._)("div",Fe,[(0,o._)("div",ke,[(0,o._)("label",xe,(0,i.zw)(e.$t("Contact's first name")),1),(0,o.wy)((0,o._)("input",{type:"text",name:"contact_first_name",maxlength:"255",class:"textinput textInput form-control",id:"id_contact_first_name","onUpdate:modelValue":t[5]||(t[5]=e=>s.contactFirstName=e),ref:"contactFirstName"},null,512),[[a.nr,s.contactFirstName]])])]),(0,o._)("div",$e,[(0,o._)("div",Ue,[(0,o._)("label",De,(0,i.zw)(e.$t("Contact's last name")),1),(0,o.wy)((0,o._)("input",{type:"text",name:"contact_last_name",maxlength:"255",class:"textinput textInput form-control",id:"id_contact_last_name","onUpdate:modelValue":t[6]||(t[6]=e=>s.contactLastName=e)},null,512),[[a.nr,s.contactLastName]])])])]),(0,o._)("div",Se,[(0,o._)("label",Te,(0,i.zw)(e.$t("Contact's email")),1),(0,o.wy)((0,o._)("input",{type:"email",name:"contact_email",maxlength:"254",class:"emailinput form-control",id:"id_contact_email","onUpdate:modelValue":t[7]||(t[7]=e=>s.contactEmail=e)},null,512),[[a.nr,s.contactEmail]])])],64)}const Ve=e=>((0,o.dD)("data-v-61014092"),e=e(),(0,o.Cn)(),e),Le={class:"input-group"},Ie=["placeholder"],qe={class:"input-group-append"},Pe={class:"input-group-text"},Ae=Ve((()=>(0,o._)("i",{class:"bi bi-search"},null,-1))),He=["onClick"];function Re(e,t,n,r,s,l){return(0,o.wg)(),(0,o.iD)("div",Le,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchTerm=e),placeholder:n.placeholder,onInput:t[1]||(t[1]=(...e)=>l.companyLookup&&l.companyLookup(...e)),onFocus:t[2]||(t[2]=e=>s.isFocused=!0)},null,40,Ie),[[a.nr,s.searchTerm]]),(0,o._)("div",qe,[(0,o.WI)(e.$slots,"appendText",{},(()=>[(0,o._)("span",Pe,[Ae,(0,o.Uk)(" "+(0,i.zw)(n.appendText),1)])]),!0)]),(0,o._)("div",{class:(0,i.C_)(["dropdown-menu shadow",{show:l.isDropdownVisible}]),ref:"dropdown"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.data,(e=>((0,o.wg)(),(0,o.iD)("a",{class:"dropdown-item",key:e.uid,onClick:t=>l.companyDetailLookup(e.uid)},(0,i.zw)(e.name)+", "+(0,i.zw)(e.city),9,He)))),128))],2)])}var Ze={name:"CompanySearch",computed:{isDropdownVisible(){return this.data.length>0}},data(){return{isFocused:!1,searchTerm:"",data:[],selectedCompany:null}},methods:{companyLookup(){this.searchTerm.length<3||this.$http.get(this.autocompleteUrl,{params:{q:this.searchTerm}}).then((e=>{this.data=e.data})).catch((e=>{console.log(e)}))},companyDetailLookup(e){this.$http.get(this.companyDetailUrl,{params:{uid:e}}).then((e=>{this.selectedCompany=e.data,this.onCallback(this.selectedCompany)})).catch((e=>{console.log(e)})),this.isFocused=!1,this.searchTerm="",this.data=[]},onWindowClick(e){this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&(this.data=[])}},props:{appendText:String,autocompleteUrl:URL,companyDetailUrl:URL,onCallback:{type:Function,required:!0},placeholder:String},mounted(){window.addEventListener("click",this.onWindowClick)},beforeUnmount(){window.removeEventListener("click",this.onWindowClick)}};const Ee=(0,ae.Z)(Ze,[["render",Re],["__scopeId","data-v-61014092"]]);var Oe=Ee,We={name:"CompanyForm",components:{CompanySearch:Oe,CountrySelect:re.CountrySelect,CityAutoComplete:ie},data(){return{name:"",address:"",country:"CH",zipcode:"",cities:[],city:"",contactFirstName:"",contactLastName:"",contactEmail:""}},methods:{companyDetailLookupResult(e){this.name=e.name,this.address=e.address,this.country=e.country,this.city=e.city,this.zipcode=e.zip_code,this.$refs.contactFirstName.focus()},onSelect(e){console.log(e)},isFormComplete(){return this.name.length>0},save(e){this.$http.patch(`/api/clients/${e}/`,{company_name:this.name,address:this.address,country:this.country,city:this.city,zip_code:this.zipcode,contact_first_name:this.contactFirstName,contact_last_name:this.contactLastName,contact_email:this.contactEmail,client_type:"company"}).then((e=>{this.$emit("company-saved",e.data)}))},setClient(e){this.name=e.company_name,this.address=e.address,this.country=e.country,this.city=e.city,this.zipcode=e.zip_code,this.contactFirstName=e.contact_first_name,this.contactLastName=e.contact_last_name,this.contactEmail=e.contact_email},onWindowClick(e){this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&(this.cities=[])}},setup(){const{t:e}=(0,se.QT)();return{t:e}},watch:{name(e){this.$emit("update:name",e)}}};const je=(0,ae.Z)(We,[["render",Ne]]);var Ye=je;const Me={class:"form-row"},Ke={class:"col-md"},Ge={id:"div_id_currency",class:"form-group"},Qe={for:"id_currency",class:"requiredField"},Xe=(0,o._)("span",{class:"asteriskField"},"*",-1),Be=["value"],Je={class:"col-md"},et={id:"div_id_vat_rate",class:"form-group"},tt={for:"id_vat_rate",class:""},nt={class:"col-md"},at={id:"div_id_default_hourly_rate",class:"form-group"},ot={for:"id_default_hourly_rate",class:"requiredField"},it=(0,o._)("span",{class:"asteriskField"},"*",-1),rt={id:"div_id_language",class:"form-group"},st={for:"id_language",class:"requiredField"},lt=(0,o._)("span",{class:"asteriskField"},"*",-1),ct=["value"],dt={id:"div_id_payment_delay_days",class:"form-group"},ut={for:"id_payment_delay_days",class:"requiredField"},mt=(0,o._)("span",{class:"asteriskField"},"*",-1),pt={id:"hint_id_payment_delay_days",class:"form-text text-muted"},_t=(0,o._)("hr",null,null,-1),yt={class:"form-row"},ht={class:"col-md"},ft={for:"exampleInvoiceCode"},vt={key:0,class:"form-control-static",id:"exampleInvoiceCode"},gt={key:1},wt={class:"col-md"},Ct={id:"div_id_slug",class:"form-group"},zt={for:"id_slug",class:"requiredField"},bt=(0,o._)("span",{class:"asteriskField"},"*",-1),Ft={id:"hint_id_slug",class:"form-text text-muted"},kt={class:"col-md"},xt={id:"div_id_invoice_current_count",class:"form-group"},$t={for:"id_invoice_current_count",class:"requiredField"},Ut=(0,o._)("span",{class:"asteriskField"},"*",-1),Dt={id:"hint_id_invoice_current_count",class:"form-text text-muted"};function St(e,t,n,r,s,l){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Me,[(0,o._)("div",Ke,[(0,o._)("div",Ge,[(0,o._)("label",Qe,[(0,o.Uk)((0,i.zw)(e.$t("Currency")),1),Xe]),(0,o.wy)((0,o._)("select",{name:"currency",class:"select custom-select",id:"id_currency","onUpdate:modelValue":t[0]||(t[0]=e=>s.currency=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.currencies,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.value,value:e.value},(0,i.zw)(e.text),9,Be)))),128))],512),[[a.bM,s.currency]])])]),(0,o._)("div",Je,[(0,o._)("div",et,[(0,o._)("label",tt,(0,i.zw)(e.$t("VAT rate")),1),(0,o.wy)((0,o._)("input",{type:"number",name:"vat_rate",step:"0.0001",class:"numberinput form-control",id:"id_vat_rate","onUpdate:modelValue":t[1]||(t[1]=e=>s.vatRate=e)},null,512),[[a.nr,s.vatRate]])])]),(0,o._)("div",nt,[(0,o._)("div",at,[(0,o._)("label",ot,[(0,o.Uk)((0,i.zw)(e.$t("Default hourly rate")),1),it]),(0,o.wy)((0,o._)("input",{type:"number",name:"default_hourly_rate",step:"0.01",class:"numberinput form-control",required:"",id:"id_default_hourly_rate","onUpdate:modelValue":t[2]||(t[2]=e=>s.defaultHourlyRate=e)},null,512),[[a.nr,s.defaultHourlyRate]])])])]),(0,o._)("div",rt,[(0,o._)("label",st,[(0,o.Uk)((0,i.zw)(e.$t("Language")),1),lt]),(0,o.wy)((0,o._)("select",{name:"language",class:"select custom-select",id:"id_language","onUpdate:modelValue":t[3]||(t[3]=e=>s.language=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.languages,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.value,value:e.value},(0,i.zw)(e.text),9,ct)))),128))],512),[[a.bM,s.language]])]),(0,o._)("div",dt,[(0,o._)("label",ut,[(0,o.Uk)((0,i.zw)(e.$t("Payment delay")),1),mt]),(0,o.wy)((0,o._)("input",{type:"number",name:"payment_delay_days",class:"numberinput form-control",required:"",id:"id_payment_delay_days","onUpdate:modelValue":t[4]||(t[4]=e=>s.paymentDelayDays=e)},null,512),[[a.nr,s.paymentDelayDays]]),(0,o._)("small",pt,(0,i.zw)(e.$t("Default delay in days to due date")),1)]),_t,(0,o._)("div",yt,[(0,o._)("div",ht,[(0,o._)("label",ft,(0,i.zw)(e.$t("Next invoice code")),1),s.slug?((0,o.wg)(),(0,o.iD)("p",vt,(0,i.zw)(s.slug)+"-"+(0,i.zw)(s.invoiceCurrentCount+1),1)):((0,o.wg)(),(0,o.iD)("p",gt,"n/a"))]),(0,o._)("div",wt,[(0,o._)("div",Ct,[(0,o._)("label",zt,[(0,o.Uk)((0,i.zw)(e.$t("Slug")),1),bt]),(0,o.wy)((0,o._)("input",{type:"text",name:"slug",maxlength:"15",class:"textinput textInput form-control",required:"",id:"id_slug","onUpdate:modelValue":t[5]||(t[5]=e=>s.slug=e)},null,512),[[a.nr,s.slug]]),(0,o._)("small",Ft,(0,i.zw)(e.$t("Used to generate invoice code")),1)])]),(0,o._)("div",kt,[(0,o._)("div",xt,[(0,o._)("label",$t,[(0,o.Uk)((0,i.zw)(e.$t("Current count of invoices")),1),Ut]),(0,o.wy)((0,o._)("input",{type:"number",name:"invoice_current_count",class:"numberinput form-control",required:"",id:"id_invoice_current_count","onUpdate:modelValue":t[6]||(t[6]=e=>s.invoiceCurrentCount=e)},null,512),[[a.nr,s.invoiceCurrentCount]]),(0,o._)("small",Dt,(0,i.zw)(e.$t("Used to generate invoice code")),1)])])])],64)}var Tt=n(6749),Nt=n.n(Tt),Vt={name:"InvoiceForm.vue",data(){return{currency:"CHF",defaultHourlyRate:0,invoiceCurrentCount:0,language:"fr",paymentDelayDays:30,slug:"",vatRate:.077,currencies:[{value:"CHF",text:"CHF"},{value:"EUR",text:"Euro"}],languages:[{value:"en",text:"English"},{value:"de",text:"Deutsch"},{value:"fr",text:"Français"},{value:"it",text:"Italiano"}]}},methods:{isFormComplete(){return this.currency&&""!=this.defaultHourlyRate&&this.language&&""!=this.paymentDelayDays&&this.slug&&""!=this.vatRate},setClient(e){this.currency=e.currency,this.invoiceCurrentCount=e.invoice_current_count,this.language=e.language,this.paymentDelayDays=e.payment_delay_days,this.slug=e.slug,this.vatRate=e.vat_rate,this.defaultHourlyRate=e.default_hourly_rate},save(e){this.$http.patch(`/api/clients/${e}/`,{currency:this.currency,invoice_current_count:this.invoiceCurrentCount,language:this.language,default_hourly_rate:this.defaultHourlyRate,payment_delay_days:this.paymentDelayDays,slug:this.slug,vat_rate:this.vatRate}).then((e=>{this.$emit("company-saved",e.data)}))}},props:{updatedSlug:{type:String,default:""}},setup(){const{t:e}=(0,se.QT)();return{t:e}},watch:{updatedSlug:function(e){this.slug=Nt()(e,{lower:!0,strict:!0})}}};const Lt=(0,ae.Z)(Vt,[["render",St]]);var It=Lt,qt={name:"App",components:{PersonForm:de,CompanyForm:Ye,InvoiceForm:It},computed:{isCompany(){return"company"===this.clientType},isPerson(){return"person"===this.clientType},isFormComplete(){let e=this.isPerson?this.$refs.personForm.isFormComplete():this.$refs.companyForm.isFormComplete();return this.company&&e&&this.$refs.invoiceForm.isFormComplete()}},data(){return{clientType:"company",slug:"",client:null,clientId:null,companies:[],company:""}},methods:{handleCompanySaved(){window.location.href="/clients/"},async saveClient(){if(null===this.clientId)try{const e={client_type:this.clientType,company:this.company},t=await this.$http.post("/api/clients/",e);this.clientId=t.data.id}catch(e){console.log(e)}null!==this.clientId&&(await this.$nextTick(),"company"===this.clientType?this.$refs.companyForm.save(this.clientId):this.$refs.personForm.save(this.clientId),this.$refs.invoiceForm.save(this.clientId))},slugUpdate(e){this.slug=e}},created(){this.$http.get("/api/companies/").then((e=>{this.companies=e.data.results,1==this.companies.length&&(this.company=this.companies[0].id)})).catch((e=>{console.log(e)}));const e=window.location.pathname,t=e.match(/\/clients\/([\da-fA-F]{8}-([\da-fA-F]{4}-){3}[\da-fA-F]{12})\/edit/);t&&(this.clientId=t[1],this.$http.get(`/api/clients/${this.clientId}/`).then((e=>{this.client=e.data,this.clientType=this.client.client_type,this.company=this.client.company,this.$refs.companyForm.setClient(this.client),this.$refs.invoiceForm.setClient(this.client),this.$refs.personForm.setClient(this.client)})).catch((e=>{console.log(e)})))},setup(){const{t:e}=(0,se.QT)({inheritLocale:!0,useScope:"local"});return{t:e}}};const Pt=(0,ae.Z)(qt,[["render",U]]);var At=Pt;function Ht(){const e=n(6406),t={};return e.keys().forEach((n=>{const a=n.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){const o=a[1];t[o]=e(n).default}})),t}var Rt=(0,se.o)({legacy:!1,locale:"fr",fallbackLocale:"en",messages:Ht()}),Zt=n(5454),Et=n(5269),Ot=n.n(Et);Zt.Z.get("/api/csrf-token/").then((e=>{const t=e.data.csrf_token;Zt.Z.defaults.headers.common["X-CSRFToken"]=t}));const Wt=(0,a.ri)(At);Wt.config.globalProperties.$http=Zt.Z,Wt.use(Rt).use(Ot()).mount("#app")},6406:function(e,t,n){var a={"./de.json":7480,"./en.json":3482,"./fr.json":5627};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id=6406}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,i){if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],i=e[d][2];for(var s=!0,l=0;l<a.length;l++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(s=!1,i<r&&(r=i));if(s){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,o,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,i,r=a[0],s=a[1],l=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)var d=l(n)}for(t&&t(a);c<r.length;c++)i=r[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},a=self["webpackChunkclients"]=self["webpackChunkclients"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(2997)}));a=n.O(a)})();
//# sourceMappingURL=app.js.map
