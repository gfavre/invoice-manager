(function(){var e={7480:function(e,t,n){"use strict";n.r(t),t["default"]={"Client for":e=>{const{normalize:t}=e;return t(["Kunde für"])},"Type of client":e=>{const{normalize:t}=e;return t(["Kundentyp"])},Company:e=>{const{normalize:t}=e;return t(["Firma"])},Person:e=>{const{normalize:t}=e;return t(["Person"])},Invoices:e=>{const{normalize:t}=e;return t(["Rechnungen"])},"First name":e=>{const{normalize:t}=e;return t(["Vorname"])},"Last name":e=>{const{normalize:t}=e;return t(["Nachname"])},Address:e=>{const{normalize:t}=e;return t(["Adresse"])},Country:e=>{const{normalize:t}=e;return t(["Land"])},City:e=>{const{normalize:t}=e;return t(["Stadt"])},"Postal code":e=>{const{normalize:t}=e;return t(["Postleitzahl"])},"Search on company register":e=>{const{normalize:t}=e;return t(["Suche im Firmenregister"])},"Company name":e=>{const{normalize:t}=e;return t(["Firmenname"])},"Contact's first name":e=>{const{normalize:t}=e;return t(["Vorname des Ansprechpartners"])},"Contact's last name":e=>{const{normalize:t}=e;return t(["Nachname des Ansprechpartners"])},"Contact's email":e=>{const{normalize:t}=e;return t(["E-Mail-Adresse des Ansprechpartners"])},Currency:e=>{const{normalize:t}=e;return t(["Währung"])},"VAT rate":e=>{const{normalize:t}=e;return t(["Mehrwertsteuersatz"])},"Default hourly rate":e=>{const{normalize:t}=e;return t(["Standard-Stundensatz"])},Language:e=>{const{normalize:t}=e;return t(["Sprache"])},"Payment delay":e=>{const{normalize:t}=e;return t(["Zahlungsfrist"])},"Default delay in days to due date":e=>{const{normalize:t}=e;return t(["Standardzahlungsfrist in Tagen"])},"Next invoice code":e=>{const{normalize:t}=e;return t(["Nächster Rechnungscode"])},Slug:e=>{const{normalize:t}=e;return t(["Kunden-Code"])},"Used to generate invoice code":e=>{const{normalize:t}=e;return t(["Zur Generierung des Rechnungscodes verwendet"])},"Current count of invoices":e=>{const{normalize:t}=e;return t(["Aktuelle Anzahl von Rechnungen"])}}},3482:function(e,t,n){"use strict";n.r(t),t["default"]={"Client for":e=>{const{normalize:t}=e;return t(["Client for"])}}},5627:function(e,t,n){"use strict";n.r(t),t["default"]={"Client for":e=>{const{normalize:t}=e;return t(["Client pour"])},"Type of client":e=>{const{normalize:t}=e;return t(["Type de client"])},Company:e=>{const{normalize:t}=e;return t(["Entreprise"])},Person:e=>{const{normalize:t}=e;return t(["Personne"])},Invoices:e=>{const{normalize:t}=e;return t(["Factures"])},"First name":e=>{const{normalize:t}=e;return t(["Prénom"])},"Last name":e=>{const{normalize:t}=e;return t(["Nom"])},Address:e=>{const{normalize:t}=e;return t(["Adresse"])},Country:e=>{const{normalize:t}=e;return t(["Pays"])},City:e=>{const{normalize:t}=e;return t(["Localité"])},"Postal code":e=>{const{normalize:t}=e;return t(["Code postal"])},"Search on company register":e=>{const{normalize:t}=e;return t(["Rechercher dans le registre du commerce"])},"Company name":e=>{const{normalize:t}=e;return t(["Nom de l'entreprise"])},"Contact's first name":e=>{const{normalize:t}=e;return t(["Prénom du contact"])},"Contact's last name":e=>{const{normalize:t}=e;return t(["Nom du contact"])},"Contact's email":e=>{const{normalize:t}=e;return t(["Email du contact"])},Currency:e=>{const{normalize:t}=e;return t(["Devise"])},"VAT rate":e=>{const{normalize:t}=e;return t(["Taux de TVA"])},"Default hourly rate":e=>{const{normalize:t}=e;return t(["Tarif horaire par défaut"])},Language:e=>{const{normalize:t}=e;return t(["Langue"])},"Payment delay":e=>{const{normalize:t}=e;return t(["Délai de paiement"])},"Default delay in days to due date":e=>{const{normalize:t}=e;return t(["Délai par défaut en jours pour la date d'échéance"])},"Next invoice code":e=>{const{normalize:t}=e;return t(["Code de la prochaine facture"])},Slug:e=>{const{normalize:t}=e;return t(["Code client"])},"Used to generate invoice code":e=>{const{normalize:t}=e;return t(["Utilisé pour générer le code de la facture"])},"Current count of invoices":e=>{const{normalize:t}=e;return t(["Décompte actuel de factures"])}}},1237:function(e,t,n){"use strict";var a=n(9242),i=n(3396),o=n(7139);const r={key:0,id:"div_id_company",class:"form-group"},l={for:"id_company_0",class:"requiredField"},s=(0,i._)("span",{class:"asteriskField"},"*",-1),c=["value","id"],d=["for"],u=(0,i._)("hr",null,null,-1),m={id:"div_id_client_type",class:"form-group"},p={for:"id_client_type_0",class:"requiredField"},_=(0,i._)("span",{class:"asteriskField"},"*",-1),y={class:"custom-control custom-radio custom-control-inline"},h={class:"custom-control-label",for:"id_client_type_0"},f=(0,i._)("i",{class:"bi bi-journal"},null,-1),v={class:"custom-control custom-radio custom-control-inline"},g={class:"custom-control-label",for:"id_client_type_1"},C=(0,i._)("i",{class:"bi bi-person-fill"},null,-1),w={class:"border-left-info shadow",id:"company_infos"},z={class:"mb-1"},U={class:"border-left-primary shadow",id:"company_infos"},b={class:"mb-1"},F={class:"border-left-success shadow"},k={class:"mb-1"},$={class:"buttonHolder"};function x(e,t,n,x,D,N){const S=(0,i.up)("person-form"),L=(0,i.up)("company-form"),V=(0,i.up)("InvoiceForm");return(0,i.wg)(),(0,i.iD)(i.HY,null,[D.companies.length>1?((0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("label",l,[(0,i.Uk)((0,o.zw)(e.$t("Client for")),1),s]),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(D.companies,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"custom-control custom-radio custom-control-inline",key:e.id},[(0,i.wy)((0,i._)("input",{type:"radio",class:"custom-control-input",name:"company",required:"",value:e.id,id:"company-"+e.id,"onUpdate:modelValue":t[0]||(t[0]=e=>D.company=e)},null,8,c),[[a.G2,D.company]]),(0,i._)("label",{class:"custom-control-label",for:"company-"+e.id},(0,o.zw)(e.name),9,d)])))),128))]),u])):(0,i.kq)("",!0),(0,i._)("div",m,[(0,i._)("label",p,[(0,i.Uk)((0,o.zw)(e.$t("Type of client")),1),_]),(0,i._)("div",null,[(0,i._)("div",y,[(0,i.wy)((0,i._)("input",{type:"radio",class:"custom-control-input",name:"client_type",value:"company",id:"id_client_type_0",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>D.clientType=e)},null,512),[[a.G2,D.clientType]]),(0,i._)("label",h,[f,(0,i.Uk)(" "+(0,o.zw)(e.$t("Company")),1)])]),(0,i._)("div",v,[(0,i.wy)((0,i._)("input",{type:"radio",class:"custom-control-input",name:"client_type",value:"person",id:"id_client_type_1",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>D.clientType=e)},null,512),[[a.G2,D.clientType]]),(0,i._)("label",g,[C,(0,i.Uk)(" "+(0,o.zw)(e.$t("Person")),1)])])])]),(0,i.wy)((0,i._)("section",null,[(0,i._)("fieldset",w,[(0,i._)("legend",z,(0,o.zw)(e.$t("Person")),1),(0,i.Wm)(S,{ref:"personForm",onSaved:N.handleComponentSaved,"onUpdate:lastName":N.slugUpdate,"client-update-url":D.urls.clientUpdateUrl},null,8,["onSaved","onUpdate:lastName","client-update-url"])])],512),[[a.F8,N.isPerson]]),(0,i.wy)((0,i._)("section",null,[(0,i._)("fieldset",U,[(0,i._)("legend",b,(0,o.zw)(e.$t("Company")),1),(0,i.Wm)(L,{ref:"companyForm",onSaved:N.handleComponentSaved,"onUpdate:name":N.slugUpdate,"client-update-url":D.urls.clientUpdateUrl},null,8,["onSaved","onUpdate:name","client-update-url"])])],512),[[a.F8,N.isCompany]]),(0,i._)("section",null,[(0,i._)("fieldset",F,[(0,i._)("legend",k,(0,o.zw)(e.$t("Invoices")),1),(0,i.Wm)(V,{ref:"invoiceForm",onSaved:N.handleComponentSaved,"updated-slug":D.slug,"client-update-url":D.urls.clientUpdateUrl},null,8,["onSaved","updated-slug","client-update-url"])])]),(0,i._)("div",$,[(0,i._)("input",{type:"submit",name:"submit",value:"Enregistrer",class:(0,o.C_)(["btn btn-primary button white",{disabled:!N.isFormComplete}]),id:"submit-id-submit",onClick:t[3]||(t[3]=(0,a.iM)((e=>N.isFormComplete?N.saveClient():N.focusFirstError()),["prevent"]))},null,2)])],64)}const D={class:"form-row"},N={class:"col-md"},S={class:"form-group"},L={for:"id_first_name",class:"requiredField"},V=(0,i._)("span",{class:"asteriskField"},"*",-1),E={class:"col-md"},T={class:"form-group"},I={for:"id_last_name",class:"requiredField"},A=(0,i._)("span",{class:"asteriskField"},"*",-1),P={class:"form-group"},q={for:"id_address"},R={class:"form-row"},H={class:"form-group"},Z=(0,i._)("label",{for:"id_country"},"Pays",-1),O={class:"form-group"},W=(0,i._)("label",{for:"id__email"},"E-mail",-1),j={class:"invalid-feedback"};function M(e,t,n,r,l,s){const c=(0,i.up)("city-auto-complete"),d=(0,i.up)("country-select");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",D,[(0,i._)("div",N,[(0,i._)("div",S,[(0,i._)("label",L,[(0,i.Uk)((0,o.zw)(e.$t("First name"))+" ",1),V]),(0,i.wy)((0,i._)("input",{type:"text",name:"first_name",maxlength:"255",class:"textinput textInput form-control",id:"id_first_name","onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),ref:"FirstName",required:"required"},null,512),[[a.nr,l.firstName]])])]),(0,i._)("div",E,[(0,i._)("div",T,[(0,i._)("label",I,[(0,i.Uk)((0,o.zw)(e.$t("Last name"))+" ",1),A]),(0,i.wy)((0,i._)("input",{type:"text",name:"contact_last_name",maxlength:"255",required:"required",class:"textinput textInput form-control",id:"id_last_name","onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e)},null,512),[[a.nr,l.lastName]])])])]),(0,i._)("div",P,[(0,i._)("label",q,(0,o.zw)(e.$t("Address")),1),(0,i.wy)((0,i._)("textarea",{name:"address",cols:"40",rows:"2",class:"textarea form-control",id:"id_address","onUpdate:modelValue":t[2]||(t[2]=e=>l.address=e)},null,512),[[a.nr,l.address]])]),(0,i._)("div",R,[(0,i.Wm)(c,{city:l.city,"onUpdate:city":t[3]||(t[3]=e=>l.city=e),zipcode:l.zipCode,"onUpdate:zipcode":t[4]||(t[4]=e=>l.zipCode=e),"city-label":e.$t("City"),"zipcode-label":e.$t("Postal code")},null,8,["city","zipcode","city-label","zipcode-label"])]),(0,i._)("div",H,[Z,(0,i.Wm)(d,{modelValue:l.country,"onUpdate:modelValue":t[5]||(t[5]=e=>l.country=e),country:l.country,topCountry:"CH",autocomplete:!0,"class-name":"form-control"},null,8,["modelValue","country"])]),(0,i._)("div",O,[W,(0,i.wy)((0,i._)("input",{type:"email",name:"email",maxlength:"254",class:(0,o.C_)(["emailinput form-control",{"is-invalid":s.emailError}]),id:"id_email","onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e)},null,2),[[a.nr,l.email]]),(0,i._)("div",j,(0,o.zw)(s.emailErrorMessage),1)])],64)}const Y={class:"col-md-3"},K={id:"div_id_zip_code",class:"form-group"},G={for:"id_zip_code"},Q={class:"input-group"},B=["onClick"],X={class:"col-md-9"},J={id:"div_id_city",class:"form-group"},ee={for:"id_city"};function te(e,t,n,r,l,s){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Y,[(0,i._)("div",K,[(0,i._)("label",G,(0,o.zw)(n.zipcodeLabel),1),(0,i._)("div",Q,[(0,i.wy)((0,i._)("input",{type:"text",name:"zip_code",maxlength:"10",class:"textinput textInput form-control",id:"id_zip_code",onInput:t[0]||(t[0]=(...e)=>s.onZipcodeInput&&s.onZipcodeInput(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>l.localZipcode=e)},null,544),[[a.nr,l.localZipcode]]),(0,i._)("ul",{class:(0,o.C_)(["dropdown-menu shadow",{show:s.isCitiesDropdownVisible}]),ref:"dropdown"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.cities,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i._)("a",{class:"dropdown-item",onClick:t=>s.onCitySelected(e)},(0,o.zw)(e),9,B)])))),128))],2)])])]),(0,i._)("div",X,[(0,i._)("div",J,[(0,i._)("label",ee,(0,o.zw)(n.cityLabel),1),(0,i.wy)((0,i._)("input",{type:"text",name:"city",maxlength:"255",class:"textinput textInput form-control",id:"id_city","onUpdate:modelValue":t[2]||(t[2]=e=>l.localCity=e)},null,512),[[a.nr,l.localCity]])])])],64)}var ne=n(6321),ae={name:"CityAutoComplete.vue",props:{zipcode:String,city:String,zipcodeLabel:{type:String,required:!0},cityLabel:{type:String,required:!0}},computed:{isCitiesDropdownVisible(){return this.cities.length>0}},data(){return{localCity:this.city,localZipcode:this.zipcode,cities:[]}},methods:{onCitySelected(e){this.localCity=e,this.cities=[]},onZipcodeInput(){""===this.localCity&&(this.localZipcode.length<3||(this.cities=(0,ne.cityFromZip)(this.localZipcode),1===this.cities.length&&(this.localCity=this.cities[0],this.cities=[])))},onWindowClick(e){this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&(this.cities=[])}},watch:{localCity(){this.$emit("update:city",this.city)},localZipcode(){this.$emit("update:zipcode",this.zipcode)},city(e){this.localCity=e},zipcode(e){this.localZipcode=e}},mounted(){window.addEventListener("click",this.onWindowClick)},beforeUnmount(){window.removeEventListener("click",this.onWindowClick)}},ie=n(89);const oe=(0,ie.Z)(ae,[["render",te]]);var re=oe,le=n(4255),se=n(5658),ce={name:"PersonForm",components:{CountrySelect:le.CountrySelect,CityAutoComplete:re},data(){return{client:{},firstName:"",lastName:"",address:"",country:"",city:"",zipCode:"",email:"",errors:{}}},computed:{emailError(){return!!this.errors.contact_email},emailErrorMessage(){return this.errors.contact_email?this.errors.contact_email[0]:""}},props:{clientUpdateUrl:String},methods:{isFormComplete(){return this.firstName.length>0&&this.lastName.length>0},setClient(e){this.client=e,this.firstName=e.contact_first_name,this.lastName=e.contact_last_name,this.address=e.address,this.country=e.country,this.city=e.city,this.zipCode=e.zip_code,this.email=e.contact_email},save(){this.errors={},this.$http.patch(this.clientUpdateUrl,{contact_first_name:this.firstName,contact_last_name:this.lastName,contact_email:this.email,address:this.address,city:this.city,zip_code:this.zipCode,country:this.country,client_type:"person"}).then((e=>{this.$emit("saved",e.data)})).catch((e=>{e.response&&e.response.data?this.errors=e.response.data:console.error(e)}))}},setup(){const{t:e}=(0,se.QT)();return{t:e}},watch:{lastName(e){this.$emit("update:lastName",e)}}};const de=(0,ie.Z)(ce,[["render",M]]);var ue=de;const me={class:"form-row"},pe={class:"col-md-6"},_e=(0,i._)("hr",null,null,-1),ye={id:"div_id_company_name",class:"form-group"},he={for:"id_company_name",class:"requiredField"},fe=(0,i._)("span",{class:"asteriskField"},"*",-1),ve={id:"div_id_address",class:"form-group"},ge={for:"id_address"},Ce={class:"form-row"},we={id:"div_id_country",class:"form-group"},ze={for:"id_country"},Ue=(0,i._)("hr",null,null,-1),be={class:"form-row"},Fe={class:"col-md"},ke={id:"div_id_contact_first_name",class:"form-group"},$e={for:"id_contact_first_name"},xe={class:"col-md"},De={id:"div_id_contact_last_name",class:"form-group"},Ne={for:"id_contact_last_name"},Se={id:"div_id_contact_email",class:"form-group"},Le={for:"id_contact_email"};function Ve(e,t,n,r,l,s){const c=(0,i.up)("company-search"),d=(0,i.up)("city-auto-complete"),u=(0,i.up)("country-select");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",me,[(0,i._)("div",pe,[(0,i.Wm)(c,{autocompleteUrl:"/api/companies-search/",companyDetailUrl:"/api/company-detail/",placeholder:e.$t("Search on company register"),onCallback:s.companyDetailLookupResult},null,8,["placeholder","onCallback"])])]),_e,(0,i._)("div",ye,[(0,i._)("label",he,[(0,i.Uk)((0,o.zw)(e.$t("Company name"))+" ",1),fe]),(0,i.wy)((0,i._)("input",{type:"text",name:"company_name",maxlength:"255",class:"textinput textInput form-control",id:"id_company_name",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>l.name=e)},null,512),[[a.nr,l.name]])]),(0,i._)("div",ve,[(0,i._)("label",ge,(0,o.zw)(e.$t("Address")),1),(0,i.wy)((0,i._)("textarea",{name:"address",cols:"40",rows:"2",class:"textarea form-control",id:"id_address","onUpdate:modelValue":t[1]||(t[1]=e=>l.address=e)},null,512),[[a.nr,l.address]])]),(0,i._)("div",Ce,[(0,i.Wm)(d,{city:l.city,"onUpdate:city":t[2]||(t[2]=e=>l.city=e),zipcode:l.zipcode,"onUpdate:zipcode":t[3]||(t[3]=e=>l.zipcode=e),"city-label":e.$t("City"),"zipcode-label":e.$t("Postal code")},null,8,["city","zipcode","city-label","zipcode-label"])]),(0,i._)("div",we,[(0,i._)("label",ze,(0,o.zw)(e.$t("Country")),1),(0,i.Wm)(u,{modelValue:l.country,"onUpdate:modelValue":t[4]||(t[4]=e=>l.country=e),country:l.country,topCountry:"CH",autocomplete:!0,"class-name":"form-control"},null,8,["modelValue","country"])]),Ue,(0,i._)("div",be,[(0,i._)("div",Fe,[(0,i._)("div",ke,[(0,i._)("label",$e,(0,o.zw)(e.$t("Contact's first name")),1),(0,i.wy)((0,i._)("input",{type:"text",name:"contact_first_name",maxlength:"255",class:"textinput textInput form-control",id:"id_contact_first_name","onUpdate:modelValue":t[5]||(t[5]=e=>l.contactFirstName=e),ref:"contactFirstName"},null,512),[[a.nr,l.contactFirstName]])])]),(0,i._)("div",xe,[(0,i._)("div",De,[(0,i._)("label",Ne,(0,o.zw)(e.$t("Contact's last name")),1),(0,i.wy)((0,i._)("input",{type:"text",name:"contact_last_name",maxlength:"255",class:"textinput textInput form-control",id:"id_contact_last_name","onUpdate:modelValue":t[6]||(t[6]=e=>l.contactLastName=e)},null,512),[[a.nr,l.contactLastName]])])])]),(0,i._)("div",Se,[(0,i._)("label",Le,(0,o.zw)(e.$t("Contact's email")),1),(0,i.wy)((0,i._)("input",{type:"email",name:"contact_email",maxlength:"254",class:"emailinput form-control",id:"id_contact_email","onUpdate:modelValue":t[7]||(t[7]=e=>l.contactEmail=e)},null,512),[[a.nr,l.contactEmail]])])],64)}const Ee=e=>((0,i.dD)("data-v-61014092"),e=e(),(0,i.Cn)(),e),Te={class:"input-group"},Ie=["placeholder"],Ae={class:"input-group-append"},Pe={class:"input-group-text"},qe=Ee((()=>(0,i._)("i",{class:"bi bi-search"},null,-1))),Re=["onClick"];function He(e,t,n,r,l,s){return(0,i.wg)(),(0,i.iD)("div",Te,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),placeholder:n.placeholder,onInput:t[1]||(t[1]=(...e)=>s.companyLookup&&s.companyLookup(...e)),onFocus:t[2]||(t[2]=e=>l.isFocused=!0)},null,40,Ie),[[a.nr,l.searchTerm]]),(0,i._)("div",Ae,[(0,i.WI)(e.$slots,"appendText",{},(()=>[(0,i._)("span",Pe,[qe,(0,i.Uk)(" "+(0,o.zw)(n.appendText),1)])]),!0)]),(0,i._)("div",{class:(0,o.C_)(["dropdown-menu shadow",{show:s.isDropdownVisible}]),ref:"dropdown"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.data,(e=>((0,i.wg)(),(0,i.iD)("a",{class:"dropdown-item",key:e.uid,onClick:t=>s.companyDetailLookup(e.uid)},(0,o.zw)(e.name)+", "+(0,o.zw)(e.city),9,Re)))),128))],2)])}var Ze={name:"CompanySearch",computed:{isDropdownVisible(){return this.data.length>0}},data(){return{isFocused:!1,searchTerm:"",data:[],selectedCompany:null}},methods:{companyLookup(){this.searchTerm.length<3||this.$http.get(this.autocompleteUrl,{params:{q:this.searchTerm}}).then((e=>{this.data=e.data})).catch((e=>{console.log(e)}))},companyDetailLookup(e){this.$http.get(this.companyDetailUrl,{params:{uid:e}}).then((e=>{this.selectedCompany=e.data,this.onCallback(this.selectedCompany)})).catch((e=>{console.log(e)})),this.isFocused=!1,this.searchTerm="",this.data=[]},onWindowClick(e){this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&(this.data=[])}},props:{appendText:String,autocompleteUrl:URL,companyDetailUrl:URL,onCallback:{type:Function,required:!0},placeholder:String},mounted(){window.addEventListener("click",this.onWindowClick)},beforeUnmount(){window.removeEventListener("click",this.onWindowClick)}};const Oe=(0,ie.Z)(Ze,[["render",He],["__scopeId","data-v-61014092"]]);var We=Oe,je={name:"CompanyForm",components:{CompanySearch:We,CountrySelect:le.CountrySelect,CityAutoComplete:re},data(){return{name:"",address:"",country:"CH",zipcode:"",cities:[],city:"",contactFirstName:"",contactLastName:"",contactEmail:""}},props:{clientUpdateUrl:String},methods:{companyDetailLookupResult(e){this.name=e.name,this.address=e.address,this.country=e.country,this.city=e.city,this.zipcode=e.zip_code,this.$refs.contactFirstName.focus()},isFormComplete(){return this.name.length>0},save(){this.$http.patch(this.clientUpdateUrl,{company_name:this.name,address:this.address,country:this.country,city:this.city,zip_code:this.zipcode,contact_first_name:this.contactFirstName,contact_last_name:this.contactLastName,contact_email:this.contactEmail,client_type:"company"}).then((e=>{this.$emit("saved",e.data)}))},setClient(e){this.name=e.company_name,this.address=e.address,this.country=e.country,this.city=e.city,this.zipcode=e.zip_code,this.contactFirstName=e.contact_first_name,this.contactLastName=e.contact_last_name,this.contactEmail=e.contact_email},onWindowClick(e){this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&(this.cities=[])}},setup(){const{t:e}=(0,se.QT)();return{t:e}},watch:{name(e){this.$emit("update:name",e)}}};const Me=(0,ie.Z)(je,[["render",Ve]]);var Ye=Me;const Ke={class:"form-row"},Ge={class:"col-md"},Qe={id:"div_id_currency",class:"form-group"},Be={for:"id_currency",class:"requiredField"},Xe=(0,i._)("span",{class:"asteriskField"},"*",-1),Je=["value"],et={class:"col-md"},tt={id:"div_id_vat_rate",class:"form-group"},nt={for:"id_vat_rate",class:""},at={class:"col-md"},it={id:"div_id_default_hourly_rate",class:"form-group"},ot={for:"id_default_hourly_rate",class:"requiredField"},rt=(0,i._)("span",{class:"asteriskField"},"*",-1),lt={id:"div_id_language",class:"form-group"},st={for:"id_language",class:"requiredField"},ct=(0,i._)("span",{class:"asteriskField"},"*",-1),dt=["value"],ut={id:"div_id_payment_delay_days",class:"form-group"},mt={for:"id_payment_delay_days",class:"requiredField"},pt=(0,i._)("span",{class:"asteriskField"},"*",-1),_t={id:"hint_id_payment_delay_days",class:"form-text text-muted"},yt=(0,i._)("hr",null,null,-1),ht={class:"form-row"},ft={class:"col-md"},vt={for:"exampleInvoiceCode"},gt={key:0,class:"form-control-static",id:"exampleInvoiceCode"},Ct={key:1},wt={class:"col-md"},zt={id:"div_id_slug",class:"form-group"},Ut={for:"id_slug",class:"requiredField"},bt=(0,i._)("span",{class:"asteriskField"},"*",-1),Ft={id:"hint_id_slug",class:"form-text text-muted"},kt={class:"col-md"},$t={id:"div_id_invoice_current_count",class:"form-group"},xt={for:"id_invoice_current_count",class:"requiredField"},Dt=(0,i._)("span",{class:"asteriskField"},"*",-1),Nt={id:"hint_id_invoice_current_count",class:"form-text text-muted"};function St(e,t,n,r,l,s){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Ke,[(0,i._)("div",Ge,[(0,i._)("div",Qe,[(0,i._)("label",Be,[(0,i.Uk)((0,o.zw)(e.$t("Currency")),1),Xe]),(0,i.wy)((0,i._)("select",{name:"currency",class:"select custom-select",id:"id_currency","onUpdate:modelValue":t[0]||(t[0]=e=>l.currency=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.currencies,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.value,value:e.value},(0,o.zw)(e.text),9,Je)))),128))],512),[[a.bM,l.currency]])])]),(0,i._)("div",et,[(0,i._)("div",tt,[(0,i._)("label",nt,(0,o.zw)(e.$t("VAT rate")),1),(0,i.wy)((0,i._)("input",{type:"number",name:"vat_rate",step:"0.0001",class:"numberinput form-control",id:"id_vat_rate","onUpdate:modelValue":t[1]||(t[1]=e=>l.vatRate=e)},null,512),[[a.nr,l.vatRate,void 0,{number:!0}]])])]),(0,i._)("div",at,[(0,i._)("div",it,[(0,i._)("label",ot,[(0,i.Uk)((0,o.zw)(e.$t("Default hourly rate")),1),rt]),(0,i.wy)((0,i._)("input",{type:"number",name:"default_hourly_rate",step:"0.01",class:"numberinput form-control",required:"",id:"id_default_hourly_rate","onUpdate:modelValue":t[2]||(t[2]=e=>l.defaultHourlyRate=e)},null,512),[[a.nr,l.defaultHourlyRate,void 0,{number:!0}]])])])]),(0,i._)("div",lt,[(0,i._)("label",st,[(0,i.Uk)((0,o.zw)(e.$t("Language")),1),ct]),(0,i.wy)((0,i._)("select",{name:"language",class:"select custom-select",id:"id_language","onUpdate:modelValue":t[3]||(t[3]=e=>l.language=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.languages,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.value,value:e.value},(0,o.zw)(e.text),9,dt)))),128))],512),[[a.bM,l.language]])]),(0,i._)("div",ut,[(0,i._)("label",mt,[(0,i.Uk)((0,o.zw)(e.$t("Payment delay")),1),pt]),(0,i.wy)((0,i._)("input",{type:"number",name:"payment_delay_days",class:"numberinput form-control",required:"",id:"id_payment_delay_days","onUpdate:modelValue":t[4]||(t[4]=e=>l.paymentDelayDays=e)},null,512),[[a.nr,l.paymentDelayDays]]),(0,i._)("small",_t,(0,o.zw)(e.$t("Default delay in days to due date")),1)]),yt,(0,i._)("div",ht,[(0,i._)("div",ft,[(0,i._)("label",vt,(0,o.zw)(e.$t("Next invoice code")),1),l.slug?((0,i.wg)(),(0,i.iD)("p",gt,(0,o.zw)(l.slug)+"-"+(0,o.zw)(l.invoiceCurrentCount+1),1)):((0,i.wg)(),(0,i.iD)("p",Ct,"n/a"))]),(0,i._)("div",wt,[(0,i._)("div",zt,[(0,i._)("label",Ut,[(0,i.Uk)((0,o.zw)(e.$t("Slug")),1),bt]),(0,i.wy)((0,i._)("input",{type:"text",name:"slug",maxlength:"15",class:"textinput textInput form-control",required:"",id:"id_slug","onUpdate:modelValue":t[5]||(t[5]=e=>l.slug=e)},null,512),[[a.nr,l.slug]]),(0,i._)("small",Ft,(0,o.zw)(e.$t("Used to generate invoice code")),1)])]),(0,i._)("div",kt,[(0,i._)("div",$t,[(0,i._)("label",xt,[(0,i.Uk)((0,o.zw)(e.$t("Current count of invoices")),1),Dt]),(0,i.wy)((0,i._)("input",{type:"number",name:"invoice_current_count",class:"numberinput form-control",required:"",id:"id_invoice_current_count","onUpdate:modelValue":t[6]||(t[6]=e=>l.invoiceCurrentCount=e)},null,512),[[a.nr,l.invoiceCurrentCount]]),(0,i._)("small",Nt,(0,o.zw)(e.$t("Used to generate invoice code")),1)])])])],64)}var Lt=n(1658),Vt=n.n(Lt),Et={name:"InvoiceForm.vue",data(){return{currency:"CHF",defaultHourlyRate:0,invoiceCurrentCount:0,language:"fr",paymentDelayDays:30,slug:"",vatRate:.077,currencies:[{value:"CHF",text:"CHF"},{value:"EUR",text:"Euro"}],languages:[{value:"en",text:"English"},{value:"de",text:"Deutsch"},{value:"fr",text:"Français"},{value:"it",text:"Italiano"}]}},methods:{isFormComplete(){return this.currency&&this.validateNumberInput(this.defaultHourlyRate)&&this.language&&""!=this.paymentDelayDays&&this.slug&&this.validateNumberInput(this.vatRate)},setClient(e){this.currency=e.currency,this.invoiceCurrentCount=e.invoice_current_count,this.language=e.language,this.paymentDelayDays=e.payment_delay_days,this.slug=e.slug,this.vatRate=e.vat_rate,this.defaultHourlyRate=e.default_hourly_rate},save(){this.$http.patch(this.clientUpdateUrl,{currency:this.currency,invoice_current_count:this.invoiceCurrentCount,language:this.language,default_hourly_rate:this.defaultHourlyRate,payment_delay_days:this.paymentDelayDays,slug:this.slug,vat_rate:this.vatRate}).then((e=>{this.$emit("saved",e.data)}))},validateNumberInput(e){return!isNaN(e)&&null!==e&&""!==e},limitSlugify(e){const t=Vt()(e,{lower:!0,remove:/[*+~.()'"!:@]/g});if(t.length>15){const e=t.indexOf("-");return e>0&&e<=15?t.slice(0,e):t.slice(0,15)}return t}},props:{updatedSlug:{type:String,default:""},clientUpdateUrl:String},setup(){const{t:e}=(0,se.QT)();return{t:e}},watch:{updatedSlug:function(e){this.slug=this.limitSlugify(e)}}};const Tt=(0,ie.Z)(Et,[["render",St]]);var It=Tt,At={name:"App",components:{PersonForm:ue,CompanyForm:Ye,InvoiceForm:It},computed:{isCompany(){return"company"===this.clientType},isPerson(){return"person"===this.clientType},isFormComplete(){let e=this.isPerson?this.$refs.personForm:this.$refs.companyForm;return this.company.length>0&&e.isFormComplete()&&this.$refs.invoiceForm.isFormComplete()}},data(){return{clientType:"company",slug:"",client:null,clientId:null,companies:[],company:"",savedComponentCount:0,urls:{clientCreateUrl:"",clientUpdateUrl:"",clientRedirectUrl:"",companiesUrl:""}}},methods:{handleComponentSaved(){this.savedComponentCount++,2===this.savedComponentCount&&(window.location=this.urls.clientRedirectUrl)},focusFirstError(){const e=document.querySelectorAll("input[required]"),t=Array.from(e).filter((e=>!e.validity.valid));t.forEach((e=>{e.classList.add("is-invalid")}));const n=Array.from(e).filter((e=>e.validity.valid));n.forEach((e=>{e.classList.remove("is-invalid")})),t[0].focus()},async saveClient(){if(this.savedComponentCount=0,null===this.clientId)try{const e={client_type:this.clientType,company:this.company},t=await this.$http.post(this.urls.clientCreateUrl,e);this.clientId=t.data.id,this.urls.clientUpdateUrl=t.data.url}catch(e){console.log(e)}null!==this.clientId&&(this.$refs.invoiceForm.save(),this.isCompany?this.$refs.companyForm.save():this.$refs.personForm.save())},slugUpdate(e){this.slug=e}},mounted(){this.$i18n.locale=this.$el.parentNode.dataset.languageCode,this.urls.clientCreateUrl=this.$el.parentNode.dataset.clientCreateUrl,this.urls.clientUpdateUrl=this.$el.parentNode.dataset.clientUpdateUrl,this.urls.clientRedirectUrl=this.$el.parentNode.dataset.clientRedirectUrl,this.urls.companiesUrl=this.$el.parentNode.dataset.companiesUrl,this.clientId=this.$el.parentNode.dataset.clientId,this.$http.get(this.urls.companiesUrl).then((e=>{this.companies=e.data.results,1===this.companies.length&&(this.company=this.companies[0].id)})).catch((e=>{console.log(e)})),this.urls.clientUpdateUrl&&this.$http.get(this.urls.clientUpdateUrl).then((e=>{this.client=e.data,this.clientType=this.client.client_type,this.company=this.client.company,this.$refs.companyForm.setClient(this.client),this.$refs.invoiceForm.setClient(this.client),this.$refs.personForm.setClient(this.client)})).catch((e=>{console.log(e)}))},setup(){const{t:e}=(0,se.QT)({inheritLocale:!0,useScope:"local"});return{t:e}}};const Pt=(0,ie.Z)(At,[["render",x]]);var qt=Pt;function Rt(){const e=n(8092),t={};return e.keys().forEach((n=>{const a=n.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){const i=a[1];t[i]=e(n).default}})),t}var Ht=(0,se.o)({legacy:!1,locale:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_I18N_LOCALE||"en",fallbackLocale:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_I18N_FALLBACK_LOCALE||"en",messages:Rt()}),Zt=n(4161),Ot=n(5269),Wt=n.n(Ot);Zt.Z.get("/api/csrf-token/").then((e=>{const t=e.data.csrf_token;Zt.Z.defaults.headers.common["X-CSRFToken"]=t}));const jt=(0,a.ri)(qt);jt.config.globalProperties.$http=Zt.Z,jt.use(Ht).use(Wt()).mount("#app")},8092:function(e,t,n){var a={"./de.json":7480,"./en.json":3482,"./fr.json":5627};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=o,e.exports=i,i.id=8092}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,o){if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],o=e[d][2];for(var l=!0,s=0;s<a.length;s++)(!1&o||r>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[s])}))?a.splice(s--,1):(l=!1,o<r&&(r=o));if(l){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,i,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,o,r=a[0],l=a[1],s=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(s)var d=s(n)}for(t&&t(a);c<r.length;c++)o=r[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},a=self["webpackChunkclients"]=self["webpackChunkclients"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(1237)}));a=n.O(a)})();
//# sourceMappingURL=app.js.map