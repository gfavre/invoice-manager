(function(){var e={3482:function(e,t,n){"use strict";n.r(t),t["default"]={message:e=>{const{normalize:t}=e;return t(["hello i18n !!"])}}},2451:function(e,t,n){"use strict";var i=n(9242),a=n(3396),o=n(7139);const l={key:0,id:"div_id_company",class:"form-group"},s=(0,a._)("label",{for:"id_company_0",class:"requiredField"},[(0,a.Uk)(" Client pour"),(0,a._)("span",{class:"asteriskField"},"*")],-1),c=["value","id"],r=["for"],d=(0,a._)("hr",null,null,-1),u={id:"div_id_client_type",class:"form-group"},p={for:"id_client_type_0",class:"requiredField"},m=(0,a._)("span",{class:"asteriskField"},"*",-1),_={class:"custom-control custom-radio custom-control-inline"},y={class:"custom-control-label",for:"id_client_type_0"},h=(0,a._)("i",{class:"bi bi-journal"},null,-1),f={class:"custom-control custom-radio custom-control-inline"},v={class:"custom-control-label",for:"id_client_type_1"},g=(0,a._)("i",{class:"bi bi-person-fill"},null,-1),w={class:"border-left-info shadow",id:"company_infos"},C=(0,a._)("legend",{class:"mb-1"},"Personne",-1),b={class:"border-left-primary shadow",id:"company_infos"},k=(0,a._)("legend",{class:"mb-1"},"Entreprise",-1),x={key:0},F=(0,a._)("dt",null,"The company",-1),U={class:"border-left-success shadow"},z=(0,a._)("legend",{class:"mb-1"},"Factures",-1),D={class:"buttonHolder"};function T(e,t,n,T,$,N){const V=(0,a.up)("person-form"),I=(0,a.up)("company-form"),L=(0,a.up)("InvoiceForm");return(0,a.wg)(),(0,a.iD)(a.HY,null,[$.companies.length>1?((0,a.wg)(),(0,a.iD)("div",l,[s,(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)($.companies,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"custom-control custom-radio custom-control-inline",key:e.id},[(0,a.wy)((0,a._)("input",{type:"radio",class:"custom-control-input",name:"company",required:"",value:e.id,id:"company-"+e.id,"onUpdate:modelValue":t[0]||(t[0]=e=>$.company=e)},null,8,c),[[i.G2,$.company]]),(0,a._)("label",{class:"custom-control-label",for:"company-"+e.id},(0,o.zw)(e.name),9,r)])))),128))]),d])):(0,a.kq)("",!0),(0,a._)("div",u,[(0,a._)("label",p,[(0,a.Uk)((0,o.zw)(T.t("Type of client")),1),m]),(0,a._)("div",null,[(0,a._)("div",_,[(0,a.wy)((0,a._)("input",{type:"radio",class:"custom-control-input",name:"client_type",value:"company",id:"id_client_type_0",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>$.clientType=e)},null,512),[[i.G2,$.clientType]]),(0,a._)("label",y,[h,(0,a.Uk)(" "+(0,o.zw)(T.t("company")),1)])]),(0,a._)("div",f,[(0,a.wy)((0,a._)("input",{type:"radio",class:"custom-control-input",name:"client_type",value:"person",id:"id_client_type_1",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>$.clientType=e)},null,512),[[i.G2,$.clientType]]),(0,a._)("label",v,[g,(0,a.Uk)(" "+(0,o.zw)(T.t("person")),1)])])])]),(0,a.wy)((0,a._)("section",null,[(0,a._)("fieldset",w,[C,(0,a.Wm)(V,{ref:"personForm","onUpdate:lastName":N.slugUpdate},null,8,["onUpdate:lastName"])])],512),[[i.F8,N.isPerson]]),(0,a.wy)((0,a._)("section",null,[(0,a._)("fieldset",b,[k,(0,a.Wm)(I,{ref:"companyForm","onUpdate:name":N.slugUpdate},null,8,["onUpdate:name"])]),null!=e.selectedCompany?((0,a.wg)(),(0,a.iD)("dl",x,[F,(0,a._)("dd",null,(0,o.zw)(e.selectedCompany),1)])):(0,a.kq)("",!0)],512),[[i.F8,N.isCompany]]),(0,a._)("section",null,[(0,a._)("fieldset",U,[z,(0,a.Wm)(L,{ref:"invoiceForm"},null,512)])]),(0,a._)("div",D,[(0,a._)("input",{type:"submit",name:"submit",value:"Enregistrer",class:"btn btn-primary button white",id:"submit-id-submit",onClick:t[3]||(t[3]=(0,i.iM)(((...e)=>N.saveClient&&N.saveClient(...e)),["prevent"]))})])],64)}const $={class:"form-row"},N={class:"col-md"},V={class:"form-group"},I=(0,a._)("label",{for:"id_first_name"},"Prénom du contact",-1),L={class:"col-md"},q={class:"form-group"},S=(0,a._)("label",{for:"id_last_name"},"Nom du contact",-1),E={class:"form-group"},Z=(0,a._)("label",{for:"id_address"},"Adresse",-1),H={class:"form-row"},O={class:"form-group"},P=(0,a._)("label",{for:"id_country"},"Pays",-1),W={class:"form-group"},j=(0,a._)("label",{for:"id__email"},"E-mail",-1);function A(e,t,n,o,l,s){const c=(0,a.up)("city-auto-complete"),r=(0,a.up)("country-select");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",$,[(0,a._)("div",N,[(0,a._)("div",V,[I,(0,a.wy)((0,a._)("input",{type:"text",name:"first_name",maxlength:"255",class:"textinput textInput form-control",id:"id_first_name","onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),ref:"FirstName"},null,512),[[i.nr,l.firstName]])])]),(0,a._)("div",L,[(0,a._)("div",q,[S,(0,a.wy)((0,a._)("input",{type:"text",name:"contact_last_name",maxlength:"255",class:"textinput textInput form-control",id:"id_last_name","onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e)},null,512),[[i.nr,l.lastName]])])])]),(0,a._)("div",E,[Z,(0,a.wy)((0,a._)("textarea",{name:"address",cols:"40",rows:"2",class:"textarea form-control",id:"id_address","onUpdate:modelValue":t[2]||(t[2]=e=>l.address=e)},null,512),[[i.nr,l.address]])]),(0,a._)("div",H,[(0,a.Wm)(c,{city:l.city,"onUpdate:city":t[3]||(t[3]=e=>l.city=e),zipcode:l.zipCode,"onUpdate:zipcode":t[4]||(t[4]=e=>l.zipCode=e)},null,8,["city","zipcode"])]),(0,a._)("div",O,[P,(0,a.Wm)(r,{modelValue:l.country,"onUpdate:modelValue":t[5]||(t[5]=e=>l.country=e),country:l.country,topCountry:"CH",autocomplete:!0,"class-name":"form-control"},null,8,["modelValue","country"])]),(0,a._)("div",W,[j,(0,a.wy)((0,a._)("input",{type:"email",name:"email",maxlength:"254",class:"emailinput form-control",id:"id_email","onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e)},null,512),[[i.nr,l.email]])])],64)}var Y=n(4255);const M={class:"col-md-3"},R={id:"div_id_zip_code",class:"form-group"},K=(0,a._)("label",{for:"id_zip_code"},"Code postal",-1),G={class:"input-group"},Q=["onClick"],X={class:"col-md-9"},B={id:"div_id_city",class:"form-group"},J=(0,a._)("label",{for:"id_city"},"Localité",-1);function ee(e,t,n,l,s,c){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",M,[(0,a._)("div",R,[K,(0,a._)("div",G,[(0,a.wy)((0,a._)("input",{type:"text",name:"zip_code",maxlength:"10",class:"textinput textInput form-control",id:"id_zip_code",onInput:t[0]||(t[0]=(...e)=>c.onZipcodeInput&&c.onZipcodeInput(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.localZipcode=e)},null,544),[[i.nr,s.localZipcode]]),(0,a._)("ul",{class:(0,o.C_)(["dropdown-menu shadow",{show:c.isCitiesDropdownVisible}]),ref:"dropdown"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.cities,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e},[(0,a._)("a",{class:"dropdown-item",onClick:t=>c.onCitySelected(e)},(0,o.zw)(e),9,Q)])))),128))],2)])])]),(0,a._)("div",X,[(0,a._)("div",B,[J,(0,a.wy)((0,a._)("input",{type:"text",name:"city",maxlength:"255",class:"textinput textInput form-control",id:"id_city","onUpdate:modelValue":t[2]||(t[2]=e=>s.localCity=e)},null,512),[[i.nr,s.localCity]])])])],64)}var te=n(6321),ne={name:"CityAutoComplete.vue",props:{zipcode:String,city:String},computed:{isCitiesDropdownVisible(){return this.cities.length>0}},data(){return{localCity:this.city,localZipcode:this.zipcode,cities:[]}},methods:{onCitySelected(e){this.localCity=e,this.cities=[]},onZipcodeInput(){""===this.localCity&&(this.localZipcode.length<3||(this.cities=(0,te.cityFromZip)(this.localZipcode),1===this.cities.length&&(this.localCity=this.cities[0],this.cities=[])))},onWindowClick(e){this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&(this.cities=[])}},watch:{localCity(){this.$emit("update:city",this.city)},localZipcode(){this.$emit("update:zipcode",this.zipcode)},city(e){this.localCity=e},zipcode(e){this.localZipcode=e}},mounted(){window.addEventListener("click",this.onWindowClick)},beforeUnmount(){window.removeEventListener("click",this.onWindowClick)}},ie=n(89);const ae=(0,ie.Z)(ne,[["render",ee]]);var oe=ae,le={name:"PersonForm",components:{CountrySelect:Y.CountrySelect,CityAutoComplete:oe},data(){return{client:{},firstName:"",lastName:"",address:"",country:"",city:"",zipCode:"",email:""}},methods:{onSelect(e){console.log(e)},setClient(e){this.client=e,this.firstName=e.contact_first_name,this.lastName=e.contact_last_name,this.address=e.address,this.country=e.country,this.city=e.city,this.zipCode=e.zip_code,this.email=e.contact_email},save(e){this.$http.patch(`/api/clients/${e}/`,{contact_first_name:this.firstName,contact_last_name:this.lastName,contact_email:this.email,address:this.address,city:this.city,zip_code:this.zipCode,country:this.country,client_type:"person"}).then((e=>{this.$emit("company-saved",e.data)}))}},watch:{lastName(e){this.$emit("update:lastName",e)}}};const se=(0,ie.Z)(le,[["render",A]]);var ce=se;const re={class:"form-row"},de={class:"col-md-6"},ue=(0,a._)("hr",null,null,-1),pe={id:"div_id_company_name",class:"form-group"},me=(0,a._)("label",{for:"id_company_name",class:"requiredField"},[(0,a.Uk)(" Nom de l'entreprise "),(0,a._)("span",{class:"asteriskField"},"*")],-1),_e={id:"div_id_address",class:"form-group"},ye=(0,a._)("label",{for:"id_address"},"Adresse",-1),he={class:"form-row"},fe={id:"div_id_country",class:"form-group"},ve=(0,a._)("label",{for:"id_country"},"Pays",-1),ge=(0,a._)("hr",null,null,-1),we={class:"form-row"},Ce={class:"col-md"},be={id:"div_id_contact_first_name",class:"form-group"},ke=(0,a._)("label",{for:"id_contact_first_name"},"Prénom du contact",-1),xe={class:"col-md"},Fe={id:"div_id_contact_last_name",class:"form-group"},Ue=(0,a._)("label",{for:"id_contact_last_name"},"Nom du contact",-1),ze={id:"div_id_contact_email",class:"form-group"},De=(0,a._)("label",{for:"id_contact_email"},"E-mail de contact",-1);function Te(e,t,n,o,l,s){const c=(0,a.up)("company-search"),r=(0,a.up)("city-auto-complete"),d=(0,a.up)("country-select");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",re,[(0,a._)("div",de,[(0,a.Wm)(c,{append:"toto",placeholder:"company lookup",autocompleteUrl:"/api/companies-search/",companyDetailUrl:"/api/company-detail/",onCallback:s.companyDetailLookupResult},null,8,["onCallback"])])]),ue,(0,a._)("div",pe,[me,(0,a.wy)((0,a._)("input",{type:"text",name:"company_name",maxlength:"255",class:"textinput textInput form-control",id:"id_company_name",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>l.name=e)},null,512),[[i.nr,l.name]])]),(0,a._)("div",_e,[ye,(0,a.wy)((0,a._)("textarea",{name:"address",cols:"40",rows:"2",class:"textarea form-control",id:"id_address","onUpdate:modelValue":t[1]||(t[1]=e=>l.address=e)},null,512),[[i.nr,l.address]])]),(0,a._)("div",he,[(0,a.Wm)(r,{city:l.city,"onUpdate:city":t[2]||(t[2]=e=>l.city=e),zipcode:l.zipcode,"onUpdate:zipcode":t[3]||(t[3]=e=>l.zipcode=e)},null,8,["city","zipcode"])]),(0,a._)("div",fe,[ve,(0,a.Wm)(d,{modelValue:l.country,"onUpdate:modelValue":t[4]||(t[4]=e=>l.country=e),country:l.country,topCountry:"CH",autocomplete:!0,"class-name":"form-control"},null,8,["modelValue","country"])]),ge,(0,a._)("div",we,[(0,a._)("div",Ce,[(0,a._)("div",be,[ke,(0,a.wy)((0,a._)("input",{type:"text",name:"contact_first_name",maxlength:"255",class:"textinput textInput form-control",id:"id_contact_first_name","onUpdate:modelValue":t[5]||(t[5]=e=>l.contactFirstName=e),ref:"contactFirstName"},null,512),[[i.nr,l.contactFirstName]])])]),(0,a._)("div",xe,[(0,a._)("div",Fe,[Ue,(0,a.wy)((0,a._)("input",{type:"text",name:"contact_last_name",maxlength:"255",class:"textinput textInput form-control",id:"id_contact_last_name","onUpdate:modelValue":t[6]||(t[6]=e=>l.contactLastName=e)},null,512),[[i.nr,l.contactLastName]])])])]),(0,a._)("div",ze,[De,(0,a.wy)((0,a._)("input",{type:"email",name:"contact_email",maxlength:"254",class:"emailinput form-control",id:"id_contact_email","onUpdate:modelValue":t[7]||(t[7]=e=>l.contactEmail=e)},null,512),[[i.nr,l.contactEmail]])])],64)}const $e=e=>((0,a.dD)("data-v-61014092"),e=e(),(0,a.Cn)(),e),Ne={class:"input-group"},Ve=["placeholder"],Ie={class:"input-group-append"},Le={class:"input-group-text"},qe=$e((()=>(0,a._)("i",{class:"bi bi-search"},null,-1))),Se=["onClick"];function Ee(e,t,n,l,s,c){return(0,a.wg)(),(0,a.iD)("div",Ne,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchTerm=e),placeholder:n.placeholder,onInput:t[1]||(t[1]=(...e)=>c.companyLookup&&c.companyLookup(...e)),onFocus:t[2]||(t[2]=e=>s.isFocused=!0)},null,40,Ve),[[i.nr,s.searchTerm]]),(0,a._)("div",Ie,[(0,a.WI)(e.$slots,"appendText",{},(()=>[(0,a._)("span",Le,[qe,(0,a.Uk)(" "+(0,o.zw)(n.appendText),1)])]),!0)]),(0,a._)("div",{class:(0,o.C_)(["dropdown-menu shadow",{show:c.isDropdownVisible}]),ref:"dropdown"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.data,(e=>((0,a.wg)(),(0,a.iD)("a",{class:"dropdown-item",key:e.uid,onClick:t=>c.companyDetailLookup(e.uid)},(0,o.zw)(e.name)+", "+(0,o.zw)(e.city),9,Se)))),128))],2)])}var Ze={name:"CompanySearch",computed:{isDropdownVisible(){return this.data.length>0}},data(){return{isFocused:!1,searchTerm:"",data:[],selectedCompany:null}},methods:{companyLookup(){this.searchTerm.length<3||this.$http.get(this.autocompleteUrl,{params:{q:this.searchTerm}}).then((e=>{this.data=e.data})).catch((e=>{console.log(e)}))},companyDetailLookup(e){this.$http.get(this.companyDetailUrl,{params:{uid:e}}).then((e=>{this.selectedCompany=e.data,this.onCallback(this.selectedCompany)})).catch((e=>{console.log(e)})),this.isFocused=!1,this.searchTerm="",this.data=[]},onWindowClick(e){this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&(this.data=[])}},props:{appendText:String,autocompleteUrl:URL,companyDetailUrl:URL,onCallback:{type:Function,required:!0},placeholder:String},mounted(){window.addEventListener("click",this.onWindowClick)},beforeUnmount(){window.removeEventListener("click",this.onWindowClick)}};const He=(0,ie.Z)(Ze,[["render",Ee],["__scopeId","data-v-61014092"]]);var Oe=He,Pe={name:"CompanyForm",components:{CompanySearch:Oe,CountrySelect:Y.CountrySelect,CityAutoComplete:oe},data(){return{name:"",address:"",country:"CH",zipcode:"",cities:[],city:"",contactFirstName:"",contactLastName:"",contactEmail:""}},methods:{companyDetailLookupResult(e){this.name=e.name,this.address=e.address,this.country=e.country,this.city=e.city,this.zipcode=e.zip_code,this.$refs.contactFirstName.focus()},onSelect(e){console.log(e)},save(e){this.$http.patch(`/api/clients/${e}/`,{company_name:this.name,address:this.address,country:this.country,city:this.city,zip_code:this.zipcode,contact_first_name:this.contactFirstName,contact_last_name:this.contactLastName,contact_email:this.contactEmail,client_type:"company"}).then((e=>{this.$emit("company-saved",e.data)}))},setClient(e){this.name=e.company_name,this.address=e.address,this.country=e.country,this.city=e.city,this.zipcode=e.zip_code,this.contactFirstName=e.contact_first_name,this.contactLastName=e.contact_last_name,this.contactEmail=e.contact_email},onWindowClick(e){this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&(this.cities=[])}},watch:{name(e){this.$emit("update:name",e)}}};const We=(0,ie.Z)(Pe,[["render",Te]]);var je=We;const Ae={class:"form-row"},Ye={class:"col-md"},Me={id:"div_id_currency",class:"form-group"},Re=(0,a._)("label",{for:"id_currency",class:"requiredField"},[(0,a.Uk)("Devise"),(0,a._)("span",{class:"asteriskField"},"*")],-1),Ke=["value"],Ge={class:"col-md"},Qe={id:"div_id_vat_rate",class:"form-group"},Xe=(0,a._)("label",{for:"id_vat_rate",class:""},"Taux de TVA",-1),Be=(0,a.uE)('<div class="col-md"><div id="div_id_default_hourly_rate" class="form-group"><label for="id_default_hourly_rate" class="requiredField"> Tarif horaire par défaut<span class="asteriskField">*</span></label><input type="number" name="default_hourly_rate" value="0.00" step="0.01" class="numberinput form-control" required="" id="id_default_hourly_rate"></div></div>',1),Je={id:"div_id_language",class:"form-group"},et=(0,a._)("label",{for:"id_language",class:"requiredField"},[(0,a.Uk)("Langue"),(0,a._)("span",{class:"asteriskField"},"*")],-1),tt=["value"],nt={id:"div_id_payment_delay_days",class:"form-group"},it=(0,a._)("label",{for:"id_payment_delay_days",class:"requiredField"},[(0,a.Uk)(" Délai de paiement"),(0,a._)("span",{class:"asteriskField"},"*")],-1),at=(0,a._)("small",{id:"hint_id_payment_delay_days",class:"form-text text-muted"}," Délai par défaut en jours jusqu'à la date d'échéance ",-1),ot=(0,a._)("hr",null,null,-1),lt={class:"form-row"},st={class:"col-md"},ct=(0,a._)("label",{for:"exampleInvoiceCode"},"Prochain code de facture",-1),rt={key:0,class:"form-control-static",id:"exampleInvoiceCode"},dt={key:1},ut={class:"col-md"},pt={id:"div_id_slug",class:"form-group"},mt=(0,a._)("label",{for:"id_slug",class:"requiredField"},[(0,a.Uk)(" Slug"),(0,a._)("span",{class:"asteriskField"},"*")],-1),_t=(0,a._)("small",{id:"hint_id_slug",class:"form-text text-muted"}," Utilisé pour générer le code de la facture ",-1),yt={class:"col-md"},ht={id:"div_id_invoice_current_count",class:"form-group"},ft=(0,a._)("label",{for:"id_invoice_current_count",class:"requiredField"},[(0,a.Uk)(" Décompte actuel de factures"),(0,a._)("span",{class:"asteriskField"},"*")],-1),vt=(0,a._)("small",{id:"hint_id_invoice_current_count",class:"form-text text-muted"}," Utilisé pour générer le code de la facture",-1);function gt(e,t,n,l,s,c){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",Ae,[(0,a._)("div",Ye,[(0,a._)("div",Me,[Re,(0,a.wy)((0,a._)("select",{name:"currency",class:"select custom-select",id:"id_currency","onUpdate:modelValue":t[0]||(t[0]=e=>s.currency=e)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.currencies,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.value,value:e.value},(0,o.zw)(e.text),9,Ke)))),128))],512),[[i.bM,s.currency]])])]),(0,a._)("div",Ge,[(0,a._)("div",Qe,[Xe,(0,a.wy)((0,a._)("input",{type:"number",name:"vat_rate",step:"0.0001",class:"numberinput form-control",id:"id_vat_rate","onUpdate:modelValue":t[1]||(t[1]=e=>s.vat_rate=e)},null,512),[[i.nr,s.vat_rate]])])]),Be]),(0,a._)("div",Je,[et,(0,a.wy)((0,a._)("select",{name:"language",class:"select custom-select",id:"id_language","onUpdate:modelValue":t[2]||(t[2]=e=>s.language=e)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.languages,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.value,value:e.value},(0,o.zw)(e.text),9,tt)))),128))],512),[[i.bM,s.language]])]),(0,a._)("div",nt,[it,(0,a.wy)((0,a._)("input",{type:"number",name:"payment_delay_days",class:"numberinput form-control",required:"",id:"id_payment_delay_days","onUpdate:modelValue":t[3]||(t[3]=e=>s.paymentDelayDays=e)},null,512),[[i.nr,s.paymentDelayDays]]),at]),ot,(0,a._)("div",lt,[(0,a._)("div",st,[ct,s.slug?((0,a.wg)(),(0,a.iD)("p",rt,(0,o.zw)(s.slug)+"-"+(0,o.zw)(s.invoiceCurrentCount+1),1)):((0,a.wg)(),(0,a.iD)("p",dt,"n/a"))]),(0,a._)("div",ut,[(0,a._)("div",pt,[mt,(0,a.wy)((0,a._)("input",{type:"text",name:"slug",maxlength:"15",class:"textinput textInput form-control",required:"",id:"id_slug","onUpdate:modelValue":t[4]||(t[4]=e=>s.slug=e)},null,512),[[i.nr,s.slug]]),_t])]),(0,a._)("div",yt,[(0,a._)("div",ht,[ft,(0,a.wy)((0,a._)("input",{type:"number",name:"invoice_current_count",class:"numberinput form-control",required:"",id:"id_invoice_current_count","onUpdate:modelValue":t[5]||(t[5]=e=>s.invoiceCurrentCount=e)},null,512),[[i.nr,s.invoiceCurrentCount]]),vt])])])],64)}var wt=n(6749),Ct=n.n(wt),bt={name:"InvoiceForm.vue",data(){return{currency:"CHF",invoiceCurrentCount:0,language:"fr",paymentDelayDays:30,slug:"",vat_rate:.077,currencies:[{value:"CHF",text:"CHF"},{value:"EUR",text:"Euro"}],languages:[{value:"en",text:"English"},{value:"de",text:"Deutsch"},{value:"fr",text:"Français"},{value:"it",text:"Italiano"}]}},methods:{setClient(e){this.currency=e.currency,this.invoiceCurrentCount=e.invoice_current_count,this.language=e.language,this.paymentDelayDays=e.payment_delay_days,this.slug=e.slug,this.vat_rate=e.vat_rate},save(e){this.$http.patch(`/api/clients/${e}/`,{currency:this.currency,invoice_current_count:this.invoiceCurrentCount,language:this.language,payment_delay_days:this.paymentDelayDays,slug:this.slug,vat_rate:this.vat_rate}).then((e=>{this.$emit("company-saved",e.data)}))},slugUpdate(e){this.slug=Ct()(e,{lower:!0,strict:!0})}},props:{defaultLanguage:{type:String,default:"fr",required:!1}}};const kt=(0,ie.Z)(bt,[["render",gt]]);var xt=kt,Ft=n(5658),Ut={name:"App",components:{PersonForm:ce,CompanyForm:je,InvoiceForm:xt},computed:{isCompany(){return"company"===this.clientType},isPerson(){return"person"===this.clientType}},data(){return{clientType:"company",slug:"",client:null,clientId:null,companies:[],company:""}},methods:{async saveClient(){if(null===this.clientId)try{const e={client_type:this.clientType,company:this.company},t=await this.$http.post("/api/clients/",e);this.clientId=t.data.id}catch(e){console.log(e)}null!==this.clientId&&(await this.$nextTick(),"company"===this.clientType?this.$refs.companyForm.save(this.clientId):this.$refs.personForm.save(this.clientId),this.$refs.invoiceForm.save(this.clientId))},slugUpdate(e){this.slug=Ct()(e,{lower:!0,strict:!0})}},created(){this.$http.get("/api/companies/").then((e=>{this.companies=e.data.results,1==this.companies.length&&(this.company=this.companies[0].id)})).catch((e=>{console.log(e)}));const e=window.location.pathname,t=e.match(/\/clients\/([\da-fA-F]{8}-([\da-fA-F]{4}-){3}[\da-fA-F]{12})\/edit/);t&&(this.clientId=t[1],this.$http.get(`/api/clients/${this.clientId}/`).then((e=>{this.client=e.data,this.clientType=this.client.client_type,this.company=this.client.company,this.$refs.companyForm.setClient(this.client),this.$refs.invoiceForm.setClient(this.client),this.$refs.personForm.setClient(this.client)})).catch((e=>{console.log(e)})))},setup(){const{t:e}=(0,Ft.QT)({inheritLocale:!0,useScope:"local"});return{t:e}}};function zt(e){e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{fr:{company:e=>{const{normalize:t}=e;return t(["Entreprise"])},person:e=>{const{normalize:t}=e;return t(["Personne"])},"Type of client":e=>{const{normalize:t}=e;return t(["Type de client"])}},en:{company:e=>{const{normalize:t}=e;return t(["Company"])},person:e=>{const{normalize:t}=e;return t(["Person"])},"Type of client":e=>{const{normalize:t}=e;return t(["Type of client"])}}}})}"function"===typeof zt&&zt(Ut);const Dt=(0,ie.Z)(Ut,[["render",T]]);var Tt=Dt;function $t(){const e=n(6406),t={};return e.keys().forEach((n=>{const i=n.match(/([A-Za-z0-9-_]+)\./i);if(i&&i.length>1){const a=i[1];t[a]=e(n).default}})),t}var Nt=(0,Ft.o)({legacy:!1,locale:"fr",fallbackLocale:"en",messages:$t()}),Vt=n(5454),It=n(5269),Lt=n.n(It);Vt.Z.get("/api/csrf-token/").then((e=>{const t=e.data.csrf_token;Vt.Z.defaults.headers.common["X-CSRFToken"]=t}));const qt=(0,i.ri)(Tt);qt.config.globalProperties.$http=Vt.Z,qt.use(Nt).use(Lt()).mount("#app")},6406:function(e,t,n){var i={"./en.json":3482};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id=6406}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,function(){var e=[];n.O=function(t,i,a,o){if(!i){var l=1/0;for(d=0;d<e.length;d++){i=e[d][0],a=e[d][1],o=e[d][2];for(var s=!0,c=0;c<i.length;c++)(!1&o||l>=o)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(s=!1,o<l&&(l=o));if(s){e.splice(d--,1);var r=a();void 0!==r&&(t=r)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,o,l=i[0],s=i[1],c=i[2],r=0;if(l.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(c)var d=c(n)}for(t&&t(i);r<l.length;r++)o=l[r],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},i=self["webpackChunkclients"]=self["webpackChunkclients"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(2451)}));i=n.O(i)})();
//# sourceMappingURL=app.js.map
