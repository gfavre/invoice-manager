(function(){var e={818:function(e,t,i){"use strict";var n=i(963),a=i(252),o=i(577);const s={class:"card-header border-bottom"},r={class:"nav nav-pills nav-justified flex-column flex-xl-row nav-wizard",id:"wizard-steps",role:"tablist"},l=(0,a._)("div",{class:"wizard-step-icon"},"1",-1),d={class:"wizard-step-text"},c={class:"wizard-step-text-name"},u={class:"wizard-step-text-details"},p=(0,a._)("div",{class:"wizard-step-icon"},"2",-1),m={class:"wizard-step-text"},h={class:"wizard-step-text-name"},g={class:"wizard-step-text-details"},v=(0,a._)("div",{class:"wizard-step-icon"},"3",-1),y={class:"wizard-step-text"},b={class:"wizard-step-text-name"},f={class:"wizard-step-text-details"},w=(0,a._)("div",{class:"wizard-step-icon"},"4",-1),_={class:"wizard-step-text"},k={class:"wizard-step-text-name"},C={class:"wizard-step-text-details"},z={key:0,class:"border-left-info shadow"},S={class:"lead"},x={class:"form-group"},$={key:1,class:"border-left-warning shadow"},I={class:"lead"},U={key:2,class:"border-left-primary shadow"},D={class:"lead"},F={key:3,class:"border-left-primary shadow"},T={class:"lead"};function A(e,t,i,n,A,q){const E=(0,a.up)("company-search"),P=(0,a.up)("CompanyForm"),B=(0,a.up)("BankingForm"),V=(0,a.up)("InvoiceSettingsForm"),L=(0,a.up)("InvoiceEmailForm");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",s,[(0,a._)("div",r,[(0,a._)("a",{class:(0,o.C_)(["nav-item nav-link",{active:1===A.stepIndex}]),href:"#wizard1","data-bs-toggle":"tab",role:"tab","aria-controls":"wizard1",onClick:t[0]||(t[0]=e=>A.stepIndex=1)},[l,(0,a._)("div",d,[(0,a._)("div",c,(0,o.zw)(e.$t("Company")),1),(0,a._)("div",u,(0,o.zw)(e.$t("Contact informations")),1)])],2),(0,a._)("a",{class:(0,o.C_)(["nav-item nav-link",{active:2===A.stepIndex,disabled:!A.stepsFinished[1]}]),id:"wizard2-tab",href:"#wizard2","data-bs-toggle":"tab",role:"tab","aria-controls":"wizard2",onClick:t[1]||(t[1]=e=>A.stepIndex=2)},[p,(0,a._)("div",m,[(0,a._)("div",h,(0,o.zw)(e.$t("Bank")),1),(0,a._)("div",g,(0,o.zw)(e.$t("Where will you get paid")),1)])],2),(0,a._)("a",{class:(0,o.C_)(["nav-item nav-link",{active:3===A.stepIndex,disabled:!A.stepsFinished[2]}]),id:"wizard3-tab",href:"#wizard3","data-bs-toggle":"tab",role:"tab","aria-controls":"wizard3",onClick:t[2]||(t[2]=e=>A.stepIndex=3)},[v,(0,a._)("div",y,[(0,a._)("div",b,(0,o.zw)(e.$t("Invoices")),1),(0,a._)("div",f,(0,o.zw)(e.$t("What will invoices look like")),1)])],2),(0,a._)("a",{class:(0,o.C_)(["nav-item nav-link",{active:4===A.stepIndex,disabled:!A.stepsFinished[3]}]),id:"wizard3-tab",href:"#wizard4","data-bs-toggle":"tab",role:"tab","aria-controls":"wizard3",onClick:t[3]||(t[3]=e=>A.stepIndex=4)},[w,(0,a._)("div",_,[(0,a._)("div",k,(0,o.zw)(e.$t("Emails")),1),(0,a._)("div",C,(0,o.zw)(e.$t("How do you send the invoices")),1)])],2)])]),1===A.stepIndex?((0,a.wg)(),(0,a.iD)("fieldset",z,[(0,a._)("legend",null,(0,o.zw)(e.$t("Step 1")),1),(0,a._)("p",S,(0,o.zw)(e.$t("Setup your company's contact informations")),1),(0,a._)("div",x,[(0,a.Wm)(E,{autocompleteUrl:"/api/companies-search/",companyDetailUrl:"/api/company-detail/",placeholder:e.$t("Search on company register"),onCallback:q.companyDetailLookupResult},null,8,["placeholder","onCallback"])]),(0,a.Wm)(P,{ref:"companyForm",company:A.company,onNext:q.nextStep,onUpdate:q.onCompanyUpdate},null,8,["company","onNext","onUpdate"])])):(0,a.kq)("",!0),2===A.stepIndex?((0,a.wg)(),(0,a.iD)("fieldset",$,[(0,a._)("legend",null,(0,o.zw)(e.$t("Step 2")),1),(0,a._)("p",I,(0,o.zw)(e.$t("Setup your banking informations to receive the payments")),1),(0,a.Wm)(B,{ref:"bankingForm",company:A.company,ibanUrl:A.urls.ibanUrl,onNext:q.nextStep,onPrev:q.previousStep,onUpdate:q.onCompanyUpdate},null,8,["company","ibanUrl","onNext","onPrev","onUpdate"])])):(0,a.kq)("",!0),3===A.stepIndex?((0,a.wg)(),(0,a.iD)("fieldset",U,[(0,a._)("legend",null,(0,o.zw)(e.$t("Step 3")),1),(0,a._)("p",D,(0,o.zw)(e.$t("Setup the invoices' look and feel")),1),(0,a.Wm)(V,{ref:"invoiceSettingsForm",company:A.company,"update-logo-url":A.urls.updateLogoUrl,"update-signature-image-url":A.urls.updateSignatureImageUrl,onNext:q.nextStep,onPrev:q.previousStep,onSubmit:q.submit,"onUpdate:company":q.onCompanyUpdate},null,8,["company","update-logo-url","update-signature-image-url","onNext","onPrev","onSubmit","onUpdate:company"])])):(0,a.kq)("",!0),4===A.stepIndex?((0,a.wg)(),(0,a.iD)("fieldset",F,[(0,a._)("legend",null,(0,o.zw)(e.$t("Step 4")),1),(0,a._)("p",T,(0,o.zw)(e.$t("Setup the email used to send invoices")),1),(0,a.Wm)(L,{ref:"invoiceEmailForm",company:A.company,onPrev:q.previousStep,onSubmit:q.submit,"onUpdate:company":q.onCompanyUpdate},null,8,["company","onPrev","onSubmit","onUpdate:company"])])):(0,a.kq)("",!0)],64)}const q={id:"div_id_name",class:"form-group"},E={for:"id_name",class:"requiredField"},P=(0,a._)("span",{class:"asteriskField"},"*",-1),B={key:0,class:"invalid-feedback"},V={id:"div_id_address",class:"form-group"},L={for:"id_address"},W={class:"form-row"},N={class:"col-md-4"},R={id:"div_id_country",class:"form-group"},M={for:"id_country"},H={class:"col-md-8"},O={id:"div_id_phone",class:"form-group"},Z={for:"id_phone"},j={key:0,class:"invalid-feedback"},K={id:"div_id_additional_phone",class:"form-group"},Q={for:"id_additional_phone"},Y={key:0,class:"invalid-feedback"},X={id:"div_id_email",class:"form-group"},J={for:"id_email"},G={key:0,class:"invalid-feedback"},ee={id:"div_id_website",class:"form-group"},te={for:"id_website"},ie={key:0,class:"invalid-feedback"},ne={class:"buttonHolder"},ae=["value"];function oe(e,t,i,s,r,l){const d=(0,a.up)("country-select"),c=(0,a.up)("city-auto-complete");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",q,[(0,a._)("label",E,[(0,a.Uk)((0,o.zw)(e.$t("Company name")),1),P]),(0,a._)("div",null,[(0,a.wy)((0,a._)("input",{type:"text",maxlength:"255",required:"required",id:"id_name",name:"name",class:(0,o.C_)(["textinput textInput form-control",{"is-invalid":e.v$.name.$error&&e.submitAttempted}]),"onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t)},null,2),[[n.nr,e.name]]),e.v$.name.$error?((0,a.wg)(),(0,a.iD)("span",B,(0,o.zw)(e.$t("This field is required")),1)):(0,a.kq)("",!0)])]),(0,a._)("div",V,[(0,a._)("label",L,(0,o.zw)(e.$t("Address")),1),(0,a._)("div",null,[(0,a.wy)((0,a._)("textarea",{name:"address",cols:"40",rows:"2",id:"id_address",class:"textarea form-control","onUpdate:modelValue":t[1]||(t[1]=t=>e.address=t)},null,512),[[n.nr,e.address]])])]),(0,a._)("div",W,[(0,a._)("div",N,[(0,a._)("div",R,[(0,a._)("label",M,(0,o.zw)(e.$t("Country")),1),(0,a.Wm)(d,{modelValue:e.country,"onUpdate:modelValue":t[2]||(t[2]=t=>e.country=t),country:e.country,autocomplete:!0,removePlaceholder:!0,topCountry:"CH",className:"lazyselect custom-select"},null,8,["modelValue","country"])])]),(0,a._)("div",H,[(0,a.Wm)(c,{city:e.city,"onUpdate:city":t[3]||(t[3]=t=>e.city=t),zipCode:e.zipCode,"onUpdate:zipCode":t[4]||(t[4]=t=>e.zipCode=t),"city-label":e.$t("City"),"zip-code-label":e.$t("Postal code")},null,8,["city","zipCode","city-label","zip-code-label"])])]),(0,a._)("div",O,[(0,a._)("label",Z,(0,o.zw)(e.$t("Phone number")),1),(0,a.wy)((0,a._)("input",{type:"tel",maxlength:"128",id:"id_phone",class:(0,o.C_)(["textinput textInput form-control",{"is-invalid":e.v$.phone.$error&&e.submitAttempted}]),"onUpdate:modelValue":t[5]||(t[5]=t=>e.phone=t)},null,2),[[n.nr,e.phone]]),e.v$.phone.$error?((0,a.wg)(),(0,a.iD)("span",j,(0,o.zw)(e.$t("Phone number is invalid")),1)):(0,a.kq)("",!0)]),(0,a._)("div",K,[(0,a._)("label",Q,(0,o.zw)(e.$t("Additional phone number")),1),(0,a.wy)((0,a._)("input",{type:"tel",maxlength:"128",id:"id_additional_phone",class:(0,o.C_)(["textinput textInput form-control",{"is-invalid":e.v$.additionalPhone.$error&&e.submitAttempted}]),"onUpdate:modelValue":t[6]||(t[6]=t=>e.additionalPhone=t)},null,2),[[n.nr,e.additionalPhone]]),e.v$.additionalPhone.$error?((0,a.wg)(),(0,a.iD)("span",Y,(0,o.zw)(e.$t("Phone number is invalid")),1)):(0,a.kq)("",!0)]),(0,a._)("div",X,[(0,a._)("label",J,(0,o.zw)(e.$t("Email")),1),(0,a.wy)((0,a._)("input",{type:"email",name:"email",maxlength:"254",id:"id_email",class:(0,o.C_)(["emailinput form-control",{"is-invalid":e.v$.email.$error&&e.submitAttempted}]),"onUpdate:modelValue":t[7]||(t[7]=t=>e.email=t)},null,2),[[n.nr,e.email]]),e.v$.email.$error?((0,a.wg)(),(0,a.iD)("span",G,(0,o.zw)(e.$t("Email address is invalid")),1)):(0,a.kq)("",!0)]),(0,a._)("div",ee,[(0,a._)("label",te,(0,o.zw)(e.$t("Website")),1),(0,a.wy)((0,a._)("input",{type:"url",name:"website",maxlength:"200",id:"id_website",class:(0,o.C_)(["urlinput form-control",{"is-invalid":e.v$.website.$error&&e.submitAttempted}]),placeholder:"https://example.com","onUpdate:modelValue":t[8]||(t[8]=t=>e.website=t)},null,2),[[n.nr,e.website]]),e.v$.website.$error?((0,a.wg)(),(0,a.iD)("span",ie,(0,o.zw)(e.$t("websiteInvalid")),1)):(0,a.kq)("",!0)]),(0,a._)("div",ne,[(0,a._)("input",{type:"submit",name:"next-1",value:e.$t("Next"),class:"btn btn btn-primary white",onClick:t[9]||(t[9]=t=>e.handleSubmit())},null,8,ae)])],64)}const se={class:"col-md-3"},re={id:"div_id_zip_code",class:"form-group"},le={for:"id_zip_code"},de={class:"input-group"},ce=["onClick"],ue={class:"col-md-9"},pe={id:"div_id_city",class:"form-group"},me={for:"id_city"};function he(e,t,i,s,r,l){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",se,[(0,a._)("div",re,[(0,a._)("label",le,(0,o.zw)(i.zipCodeLabel),1),(0,a._)("div",de,[(0,a.wy)((0,a._)("input",{type:"text",name:"zip_code",maxlength:"10",class:"textinput textInput form-control",id:"id_zip_code",onInput:t[0]||(t[0]=(...e)=>l.onZipCodeInput&&l.onZipCodeInput(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>r.localZipCode=e)},null,544),[[n.nr,r.localZipCode]]),(0,a._)("ul",{class:(0,o.C_)(["dropdown-menu shadow",{show:l.isCitiesDropdownVisible}]),ref:"dropdown"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.cities,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e},[(0,a._)("a",{class:"dropdown-item",onClick:t=>l.onCitySelected(e)},(0,o.zw)(e),9,ce)])))),128))],2)])])]),(0,a._)("div",ue,[(0,a._)("div",pe,[(0,a._)("label",me,(0,o.zw)(i.cityLabel),1),(0,a.wy)((0,a._)("input",{type:"text",name:"city",maxlength:"255",class:"textinput textInput form-control",id:"id_city","onUpdate:modelValue":t[2]||(t[2]=e=>r.localCity=e)},null,512),[[n.nr,r.localCity]])])])],64)}var ge=i(673),ve={name:"CityAutoComplete.vue",props:{zipCode:String,city:String,zipCodeLabel:{type:String,required:!0},cityLabel:{type:String,required:!0}},computed:{isCitiesDropdownVisible(){return this.cities.length>0}},data(){return{localCity:this.city,localZipCode:this.zipCode,cities:[]}},methods:{onCitySelected(e){this.localCity=e,this.cities=[]},onZipCodeInput(){""===this.localCity&&(this.localZipCode.length<3||(this.cities=(0,ge.cityFromZip)(this.localZipCode),1===this.cities.length&&(this.localCity=this.cities[0],this.cities=[])))},onWindowClick(e){this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&(this.cities=[])}},watch:{localCity(e){this.$emit("update:city",e)},localZipCode(e){this.$emit("update:zipCode",e)},city(e){this.localCity=e},zipCode(e){this.localZipCode=e}},mounted(){window.addEventListener("click",this.onWindowClick)},beforeUnmount(){window.removeEventListener("click",this.onWindowClick)}},ye=i(744);const be=(0,ye.Z)(ve,[["render",he]]);var fe=be,we=i(705),_e=i(760),ke=i(144);const Ce=e=>!e||(0,ke.y)(e,"CH");var ze=(0,a.aZ)({name:"CompanyForm",components:{CityAutoComplete:fe},emits:{next:null},props:{company:{type:Object,required:!0},onUpdate:{type:Function,required:!0}},data(){return{cities:[],name:this.company.name,address:this.company.address,city:this.company.city,zipCode:this.company.zipCode,country:this.company.country,phone:this.company.phone,additionalPhone:this.company.additionalPhone,email:this.company.email,website:this.company.website,submitAttempted:!1,v$:(0,we.ZP)()}},methods:{focusFirstInvalidField(){const e=document.querySelectorAll(".is-invalid");e.length>0&&e[0].focus()},setCompany(e){this.name=e.name,this.address=e.address,this.city=e.city,this.zipCode=e.zipCode,this.country=e.country,this.phone=e.phone,this.additionalPhone=e.additionalPhone,this.email=e.email,this.website=e.website},handleSubmit(){this.submitAttempted=!0,this.v$.$validate().then((e=>{e?(this.onUpdate({name:this.name,address:this.address,city:this.city,zipCode:this.zipCode,country:this.country,phone:this.phone,additionalPhone:this.additionalPhone,email:this.email,website:this.website}),this.$emit("next")):this.focusFirstInvalidField()}))}},validations(){return{name:{required:_e.C1},email:{email:_e.Do},website:{url:_e.HQ},phone:{validatePhoneNumber:Ce},additionalPhone:{validatePhoneNumber:Ce}}}});const Se=(0,ye.Z)(ze,[["render",oe]]);var xe=Se,$e=i(150);const Ie=e=>((0,a.dD)("data-v-27068d33"),e=e(),(0,a.Cn)(),e),Ue={class:"input-group"},De=["placeholder"],Fe={class:"input-group-append"},Te={class:"input-group-text"},Ae=Ie((()=>(0,a._)("i",{class:"bi bi-search"},null,-1))),qe=["onClick"];function Ee(e,t,i,s,r,l){return(0,a.wg)(),(0,a.iD)("div",Ue,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>r.searchTerm=e),placeholder:i.placeholder,onInput:t[1]||(t[1]=(...e)=>l.companyLookup&&l.companyLookup(...e)),onFocus:t[2]||(t[2]=e=>r.isFocused=!0)},null,40,De),[[n.nr,r.searchTerm]]),(0,a._)("div",Fe,[(0,a.WI)(e.$slots,"appendText",{},(()=>[(0,a._)("span",Te,[Ae,(0,a.Uk)(" "+(0,o.zw)(i.appendText),1)])]),!0)]),(0,a._)("div",{class:(0,o.C_)(["dropdown-menu company-results shadow",{show:l.isDropdownVisible}]),ref:"dropdown"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.data,(e=>((0,a.wg)(),(0,a.iD)("a",{class:"dropdown-item",key:e.uid,onClick:t=>l.companyDetailLookup(e.uid)},(0,o.zw)(e.name)+", "+(0,o.zw)(e.city),9,qe)))),128))],2)])}var Pe={name:"CompanySearch",computed:{isDropdownVisible(){return this.data.length>0}},data(){return{isFocused:!1,searchTerm:"",data:[],selectedCompany:null}},props:{appendText:String,autocompleteUrl:String,companyDetailUrl:String,onCallback:{type:Function,required:!0},placeholder:String},methods:{companyLookup(){this.searchTerm.length<3||this.$http.get(this.autocompleteUrl,{params:{q:this.searchTerm}}).then((e=>{this.data=e.data})).catch((e=>{console.log(e)}))},companyDetailLookup(e){this.$http.get(this.companyDetailUrl,{params:{uid:e}}).then((e=>{this.selectedCompany=e.data,this.onCallback(this.selectedCompany)})).catch((e=>{console.error(e)})),this.isFocused=!1,this.searchTerm="",this.data=[]},onWindowClick(e){this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&(this.data=[])}},mounted(){window.addEventListener("click",this.onWindowClick)},beforeUnmount(){window.removeEventListener("click",this.onWindowClick)}};const Be=(0,ye.Z)(Pe,[["render",Ee],["__scopeId","data-v-27068d33"]]);var Ve=Be;const Le={id:"div_id_vat_id",class:"form-group"},We={for:"id_vat_id"},Ne={class:"form-row"},Re={class:"col-md-6"},Me={id:"div_id_iban",class:"form-group"},He=(0,a._)("label",{for:"id_iban"},[(0,a.Uk)("IBAN"),(0,a._)("span",{class:"asteriskField"},"*")],-1),Oe={key:0,class:"invalid-feedback"},Ze={key:1,class:"invalid-feedback"},je={id:"emailHelp",class:"form-text text-muted"},Ke={class:"col-md-6"},Qe={id:"div_id_name_for_bank",class:"form-group"},Ye={for:"id_name_for_bank"},Xe=(0,a._)("span",{class:"asteriskField"},"*",-1),Je={key:0,class:"invalid-feedback"},Ge={class:"form-row"},et={class:"col-9"},tt={id:"div_id_bank",class:"form-group"},it={for:"id_bank"},nt={class:"col"},at={id:"div_id_bic",class:"form-group"},ot=(0,a._)("label",{for:"id_bic"},"BIC",-1),st={class:"buttonHolder"},rt=["value"],lt=["value"];function dt(e,t,i,s,r,l){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",Le,[(0,a._)("label",We,(0,o.zw)(e.$t("VAT ID")),1),(0,a.wy)((0,a._)("input",{type:"text",name:"vatId",maxlength:"20",id:"id_vat_id",class:"textinput textInput form-control",placeholder:"CHE-123.456.789","onUpdate:modelValue":t[0]||(t[0]=e=>r.vatId=e)},null,512),[[n.nr,r.vatId]])]),(0,a._)("div",Ne,[(0,a._)("div",Re,[(0,a._)("div",Me,[He,(0,a.wy)((0,a._)("input",{type:"text",name:"iban",maxlength:"34",minlength:"15",id:"id_iban",class:(0,o.C_)(["textinput textInput form-control",l.classIbanValid]),placeholder:"CH12 1234 5678 9012 3456 7",required:"required","onUpdate:modelValue":t[1]||(t[1]=e=>r.iban=e)},null,2),[[n.nr,r.iban]]),l.ibanInvalid?((0,a.wg)(),(0,a.iD)("span",Oe,(0,o.zw)(e.$t("The IBAN seems invalid")),1)):(0,a.kq)("",!0),r.v$.iban.$error?((0,a.wg)(),(0,a.iD)("span",Ze,(0,o.zw)(e.$t("This field is required")),1)):(0,a.kq)("",!0),(0,a._)("small",je,(0,o.zw)(e.$t("Often displayed on the back of your bank card, or in your ebanking")),1)])]),(0,a._)("div",Ke,[(0,a._)("div",Qe,[(0,a._)("label",Ye,[(0,a.Uk)((0,o.zw)(e.$t("Bank account's owner name")),1),Xe]),(0,a.wy)((0,a._)("input",{type:"text",name:"nameForBank",maxlength:"255",id:"id_name_for_bank",class:(0,o.C_)(["textinput textInput form-control",{"is-invalid":r.v$.nameForBank.$error}]),required:"required","onUpdate:modelValue":t[2]||(t[2]=e=>r.nameForBank=e),ref:"nameForBankField"},null,2),[[n.nr,r.nameForBank]]),r.v$.nameForBank.$error?((0,a.wg)(),(0,a.iD)("span",Je,(0,o.zw)(e.$t("This field is required")),1)):(0,a.kq)("",!0)])])]),(0,a._)("div",Ge,[(0,a._)("div",et,[(0,a._)("div",tt,[(0,a._)("label",it,(0,o.zw)(e.$t("Bank")),1),(0,a.wy)((0,a._)("textarea",{name:"bank",cols:"40",rows:"3",id:"id_bank",class:"textarea form-control","onUpdate:modelValue":t[3]||(t[3]=e=>r.bank=e)},null,512),[[n.nr,r.bank]])])]),(0,a._)("div",nt,[(0,a._)("div",at,[ot,(0,a.wy)((0,a._)("input",{type:"text",name:"swift",maxlength:"11",id:"id_bic",class:"textinput textInput form-control","onUpdate:modelValue":t[4]||(t[4]=e=>r.swift=e)},null,512),[[n.nr,r.swift]])])])]),(0,a._)("div",st,[(0,a._)("input",{type:"button",name:"prev-2",value:e.$t("Previous"),class:"btn btn btn-secondary white",onClick:t[5]||(t[5]=e=>l.handleSubmit(-1))},null,8,rt),(0,a._)("input",{type:"button",name:"next-2",value:e.$t("Next"),class:"btn btn btn-primary white",onClick:t[6]||(t[6]=e=>l.handleSubmit(1))},null,8,lt)])],64)}var ct={name:"BankingForm",props:{company:{type:Object,required:!0},ibanUrl:{type:String,required:!0},onUpdate:{type:Function,required:!0}},emits:["prev","next"],data(){return{vatId:this.company.vatId,iban:this.company.iban,nameForBank:this.company.nameForBank?this.company.nameForBank:this.company.name,bank:this.company.bank,swift:this.company.swift,ibanValid:void 0,submitAttempted:!1,v$:(0,we.ZP)()}},computed:{classIbanValid(){return!0===this.ibanValid?"is-valid":!1===this.ibanValid||this.v$.iban.$error?"is-invalid":""},ibanInvalid(){return!1===this.ibanValid}},methods:{focusFirstInvalidField(){const e=document.querySelectorAll(".is-invalid");e.length>0&&e[0].focus()},async ibanLookup(){if(this.iban.replace(/\s/g,"").length<15)return;if(!this.ibanUrl)return void console.error("ibanUrl is not defined");const e=`${this.ibanUrl}?q=${this.iban}`,t=await fetch(e),i=await t.json();this.ibanValid=i.valid,this.ibanValid?(this.bank=`${i.bank.name}\n${i.bank.address}\n${i.bank.zip_code} ${i.bank.city}`,this.swift=i.bank.swift,this.$refs.nameForBankField.focus()):(this.bank="",this.swift="")},handleSubmit(e){this.submitAttempted=!0,this.v$.$validate().then((t=>{t?(this.onUpdate({vatId:this.vatId,iban:this.iban,nameForBank:this.nameForBank,bank:this.bank,swift:this.swift}),-1===e?this.$emit("prev"):1===e&&this.$emit("next")):this.focusFirstInvalidField()}))},setCompany(e){this.vatId=this.vatId?this.vatId:e.vatId,this.bank=this.bank?this.bank:e.bank,this.swift=this.swift?this.swift:e.swift,this.iban=this.iban?this.iban:e.iban,this.nameForBank||(this.nameForBank=e.nameForBank?e.nameForBank:e.name)}},validations(){return{iban:{required:_e.C1},nameForBank:{required:_e.C1}}},watch:{iban:function(){this.ibanLookup()}}};const ut=(0,ye.Z)(ct,[["render",dt]]);var pt=ut;const mt=e=>((0,a.dD)("data-v-1ba17fc8"),e=e(),(0,a.Cn)(),e),ht={class:"toolbar"},gt={class:"btn-group",role:"group"},vt=mt((()=>(0,a._)("i",{class:"bi bi-pencil-fill"},null,-1))),yt=[vt],bt=mt((()=>(0,a._)("i",{class:"bi bi-layout-split"},null,-1))),ft=[bt],wt=mt((()=>(0,a._)("i",{class:"bi bi-eye-fill"},null,-1))),_t=[wt],kt={class:"invoice-form",ref:"form"},Ct={key:0},zt=mt((()=>(0,a._)("i",{class:"bi bi-file-earmark-image"},null,-1))),St={id:"div_id_contrast_color",class:"form-group"},xt={id:"div_id_invoice_note",class:"form-group"},$t={for:"id_invoice_note"},It={id:"hint_id_invoice_note",class:"form-text text-muted"},Ut={id:"div_id_thanks",class:"form-group"},Dt={for:"id_thanks"},Ft={id:"hint_id_thanks",class:"form-text text-muted"},Tt={id:"div_id_signature_text",class:"form-group"},At={for:"id_signature_text"},qt={id:"div_id_signature_image",class:"form-group"},Et={key:0},Pt=mt((()=>(0,a._)("i",{class:"bi bi-file-earmark-image"},null,-1))),Bt={class:"buttonHolder"},Vt=["value"],Lt=["value"],Wt=mt((()=>(0,a._)("i",{class:"bi bi-arrow-left-right"},null,-1))),Nt=[Wt],Rt={class:"invoice-preview",ref:"preview"};function Mt(e,t,i,s,r,l){const d=(0,a.up)("FileInput"),c=(0,a.up)("FormKit"),u=(0,a.up)("Editor"),p=(0,a.up)("InvoicePreview");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("nav",ht,[(0,a._)("div",gt,[(0,a._)("button",{type:"button",class:(0,o.C_)(["btn",{active:"form"===e.activeSection}]),onClick:t[0]||(t[0]=e=>l.setActiveSection("form"))},yt,2),(0,a._)("button",{type:"button",class:(0,o.C_)(["btn",{active:"both"===e.activeSection}]),onClick:t[1]||(t[1]=e=>l.setActiveSection("both"))},ft,2),(0,a._)("button",{type:"button",class:(0,o.C_)(["btn",{active:"preview"===e.activeSection}]),onClick:t[2]||(t[2]=e=>l.setActiveSection("preview"))},_t,2)])]),(0,a._)("div",{class:(0,o.C_)(["form-container",e.activeSection]),ref:"container",style:(0,o.j5)(l.gridStyle)},[(0,a.wy)((0,a._)("div",kt,[(0,a.Wm)(d,{modelValue:e.logo,"onUpdate:modelValue":t[3]||(t[3]=t=>e.logo=t),onInput:l.handleLogoInput,label:e.$t("Logo")},null,8,["modelValue","onInput","label"]),l.logoFileName?((0,a.wg)(),(0,a.iD)("p",Ct,[zt,(0,a.Uk)(" "+(0,o.zw)(l.logoFileName),1)])):(0,a.kq)("",!0),(0,a._)("div",St,[(0,a.Wm)(c,{type:"color",label:e.$t("Contrast color"),validation:"required",modelValue:e.contrastColor,"onUpdate:modelValue":t[4]||(t[4]=t=>e.contrastColor=t)},null,8,["label","modelValue"])]),(0,a._)("div",xt,[(0,a._)("label",$t,(0,o.zw)(e.$t("Notes")),1),(0,a.Wm)(u,{modelValue:e.invoiceNote,"onUpdate:modelValue":t[5]||(t[5]=t=>e.invoiceNote=t),"api-key":"nf16mminr724hh5tj7jgizwldbt3wy1rhmriy9trfwefr4wq",init:l.tinyMCEConfig},null,8,["modelValue","init"]),(0,a._)("small",It,(0,o.zw)(e.$t("Displayed between banking details and signature")),1)]),(0,a._)("div",Ut,[(0,a._)("label",Dt,(0,o.zw)(e.$t("Thanks")),1),(0,a.Wm)(u,{modelValue:e.thanksMessage,"onUpdate:modelValue":t[6]||(t[6]=t=>e.thanksMessage=t),"api-key":"nf16mminr724hh5tj7jgizwldbt3wy1rhmriy9trfwefr4wq",init:l.tinyMCEConfig},null,8,["modelValue","init"]),(0,a._)("small",Ft,(0,o.zw)(e.$t("thanksMessageHelptext")),1)]),(0,a._)("div",Tt,[(0,a._)("label",At,(0,o.zw)(e.$t("Signature (text)")),1),(0,a.wy)((0,a._)("input",{type:"text",name:"signature_text",maxlength:"100",id:"id_signature_text",class:"textinput textInput form-control","onUpdate:modelValue":t[7]||(t[7]=t=>e.signatureText=t)},null,512),[[n.nr,e.signatureText]])]),(0,a._)("div",qt,[(0,a.Wm)(d,{modelValue:e.signatureImage,"onUpdate:modelValue":t[8]||(t[8]=t=>e.signatureImage=t),onInput:l.handleSignatureImageInput,label:e.$t("Signature (image)")},null,8,["modelValue","onInput","label"]),l.signatureFileName?((0,a.wg)(),(0,a.iD)("p",Et,[Pt,(0,a.Uk)(" "+(0,o.zw)(l.signatureFileName),1)])):(0,a.kq)("",!0)]),(0,a._)("div",Bt,[(0,a._)("input",{type:"button",name:"prev-3",value:e.$t("Previous"),class:"btn btn btn-secondary white",onClick:t[9]||(t[9]=e=>l.handleSubmit(-1))},null,8,Vt),(0,a._)("input",{type:"submit",value:e.$t("Next"),class:"btn btn btn-primary white",onClick:t[10]||(t[10]=e=>l.handleSubmit(1))},null,8,Lt)])],512),[[n.F8,"form"===e.activeSection||"both"===e.activeSection]]),(0,a._)("div",{class:"handle",ref:"handle",onMousedown:t[11]||(t[11]=(...e)=>l.startResizing&&l.startResizing(...e)),onClick:t[12]||(t[12]=(...e)=>l.toggleSection&&l.toggleSection(...e)),style:(0,o.j5)({cursor:l.handleCursor})},Nt,36),(0,a.wy)((0,a._)("div",Rt,[(0,a.Wm)(p,{company:i.company,"contrast-color":e.contrastColor,"invoice-note":e.invoiceNote,"thanks-message":e.thanksMessage,logo:l.logoUrl,"signature-text":e.signatureText,"signature-image":l.signatureImageUrl},null,8,["company","contrast-color","invoice-note","thanks-message","logo","signature-text","signature-image"])],512),[[n.F8,"preview"===e.activeSection||"both"===e.activeSection]])],6)],64)}var Ht=i(396);const Ot=e=>((0,a.dD)("data-v-8637c664"),e=e(),(0,a.Cn)(),e),Zt={class:"row"},jt={class:"col-3",id:"side"},Kt={itemscope:"",itemtype:"http://schema.org/LocalBusiness",id:"company-address"},Qt={itemprop:"name"},Yt=Ot((()=>(0,a._)("br",null,null,-1))),Xt={itemprop:"address",itemscope:"",itemtype:"http://schema.org/PostalAddress"},Jt={itemprop:"streetAddress"},Gt=Ot((()=>(0,a._)("br",null,null,-1))),ei={key:0,itemprop:"addressCountry"},ti={itemprop:"postalCode"},ii={itemprop:"addressLocality"},ni=Ot((()=>(0,a._)("br",null,null,-1))),ai={key:0},oi={key:0},si=Ot((()=>(0,a._)("br",null,null,-1))),ri={key:1},li=Ot((()=>(0,a._)("br",null,null,-1))),di={key:2},ci={href:"mailto:{{ company.email }}",itemprop:"email"},ui=Ot((()=>(0,a._)("br",null,null,-1))),pi={key:3},mi={href:"{{ company.website_url }}"},hi=Ot((()=>(0,a._)("br",null,null,-1))),gi={key:4},vi={itemprop:"vatID"},yi=Ot((()=>(0,a._)("br",null,null,-1))),bi={class:"col-9",id:"content"},fi={class:"row justify-content-end"},wi={key:0,class:"col-12 text-right",id:"logo"},_i=["src"],ki={class:"col-6",id:"customer-address"},Ci=Ot((()=>(0,a._)("br",null,null,-1))),zi=Ot((()=>(0,a._)("br",null,null,-1))),Si={id:"invoice-content"},xi={class:"row"},$i={class:"col-3"},Ii={class:"col-9"},Ui={class:"col-3"},Di={class:"col-9"},Fi={class:"table"},Ti={class:"text-nowrap"},Ai={class:"text-nowrap"},qi={class:"text-nowrap"},Ei={class:"text-nowrap"},Pi={colspan:"4",class:"text-right"},Bi={class:"text-nowrap"},Vi={key:0},Li={colspan:"3",class:"text-right"},Wi={class:"text-nowrap"},Ni={class:"text-nowrap"},Ri={colspan:"4",class:"text-right"},Mi={class:"text-nowrap"},Hi={class:"row",id:"bank"},Oi={class:"col-6"},Zi={class:"col-6"},ji=Ot((()=>(0,a._)("br",null,null,-1))),Ki={key:0},Qi=Ot((()=>(0,a._)("br",null,null,-1))),Yi={key:1},Xi=Ot((()=>(0,a._)("br",null,null,-1))),Ji=["innerHTML"],Gi={class:"row"},en=["innerHTML"],tn={key:1},nn={key:0,class:"col-6",id:"signature"},an=["src"],on={key:1};function sn(e,t,i,n,s,r){return(0,a.wg)(),(0,a.iD)("div",{class:"container invoice",style:(0,o.j5)(`--background-color: ${i.contrastColor}`)},[(0,a._)("div",Zt,[(0,a._)("div",jt,[(0,a._)("h1",null,(0,o.zw)(e.$t("Invoice")),1),(0,a._)("div",Kt,[(0,a._)("span",Qt,(0,o.zw)(i.company.name),1),(0,a.Uk)(),Yt,(0,a._)("address",Xt,[(0,a._)("span",Jt,(0,o.zw)(i.company.address),1),Gt,i.company.country?((0,a.wg)(),(0,a.iD)("span",ei,(0,o.zw)(i.company.country)+"-",1)):(0,a.kq)("",!0),(0,a._)("span",ti,(0,o.zw)(i.company.zipcode),1),(0,a.Uk)(),(0,a._)("span",ii,(0,o.zw)(i.company.city),1),ni]),i.company.phone?((0,a.wg)(),(0,a.iD)("div",ai,[i.company.additionalPhone?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",oi,(0,o.zw)(e.$t("Tel")),1)),(0,a.Uk)(" "+(0,o.zw)(i.company.phone)+" ",1),si])):(0,a.kq)("",!0),i.company.additionalPhone?((0,a.wg)(),(0,a.iD)("div",ri,[(0,a.Uk)((0,o.zw)(i.company.additional_phone)+" ",1),li])):(0,a.kq)("",!0),i.company.email?((0,a.wg)(),(0,a.iD)("div",di,[(0,a._)("a",ci,(0,o.zw)(i.company.email),1),ui])):(0,a.kq)("",!0),i.company.website?((0,a.wg)(),(0,a.iD)("div",pi,[(0,a._)("a",mi,(0,o.zw)(i.company.website),1),hi])):(0,a.kq)("",!0),i.company.vatId?((0,a.wg)(),(0,a.iD)("div",gi,[(0,a._)("span",null,(0,o.zw)(e.$t("VAT ID"))+":",1),(0,a.Uk)(),(0,a._)("span",vi,(0,o.zw)(i.company.vatId),1),yi])):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,o.zw)(i.company.iban),1)])]),(0,a._)("div",bi,[(0,a._)("div",fi,[i.logo?((0,a.wg)(),(0,a.iD)("section",wi,[(0,a._)("img",{src:i.logo},null,8,_i)])):(0,a.kq)("",!0),(0,a._)("section",ki,[(0,a._)("address",null,[(0,a.Uk)((0,o.zw)(s.client.name),1),Ci,(0,a.Uk)(" "+(0,o.zw)(s.client.address),1),zi,(0,a.Uk)(" "+(0,o.zw)(s.client.country)+" - "+(0,o.zw)(s.client.zipCode)+" "+(0,o.zw)(s.client.city),1)]),(0,a._)("p",null,(0,o.zw)(i.company.city)+", "+(0,o.zw)(s.invoice.date),1)])]),(0,a._)("section",Si,[(0,a._)("h3",null,(0,o.zw)(s.invoice.title),1),(0,a._)("p",null,(0,o.zw)(s.invoice.description),1),(0,a._)("p",null,(0,o.zw)(e.$t("workDone",{start:s.invoice.period_start,end:s.invoice.period_end})),1),(0,a._)("dl",xi,[(0,a._)("dt",$i,(0,o.zw)(e.$t("Invoice ID")),1),(0,a._)("dd",Ii,(0,o.zw)(s.invoice.code),1),(0,a._)("dt",Ui,(0,o.zw)(e.$t("Due date")),1),(0,a._)("dd",Di,(0,o.zw)(s.invoice.due_date),1)]),(0,a._)("table",Fi,[(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,(0,o.zw)(e.$t("Description")),1),(0,a._)("th",null,(0,o.zw)(e.$t("Quantity")),1),(0,a._)("th",null,(0,o.zw)(e.$t("Unit")),1),(0,a._)("th",null,(0,o.zw)(e.$t("Unit price")),1),(0,a._)("th",null,(0,o.zw)(e.$t("Cost")),1)])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.invoice.lines,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id},[(0,a._)("td",null,(0,o.zw)(t.description),1),(0,a._)("td",Ti,(0,o.zw)(t.quantity),1),(0,a._)("td",Ai,(0,o.zw)(t.unit),1),(0,a._)("td",qi,"CHF "+(0,o.zw)(e.$formatAmount(t.pricePerUnit)),1),(0,a._)("td",Ei,"CHF "+(0,o.zw)(e.$formatAmount(t.total)),1)])))),128))]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[(0,a._)("td",Pi,(0,o.zw)(e.$t("Subtotal")),1),(0,a._)("td",Bi,"CHF "+(0,o.zw)(e.$formatAmount(s.invoice.subtotal)),1)]),r.vat_rate?((0,a.wg)(),(0,a.iD)("tr",Vi,[(0,a._)("td",Li,(0,o.zw)(e.$t("VAT")),1),(0,a._)("td",Wi,(0,o.zw)(r.vat_rate)+"%",1),(0,a._)("td",Ni,"CHF "+(0,o.zw)(e.$formatAmount(r.vat)),1)])):(0,a.kq)("",!0),(0,a._)("tr",null,[(0,a._)("th",Ri,(0,o.zw)(e.$t("Total")),1),(0,a._)("th",Mi,"CHF "+(0,o.zw)(e.$formatAmount(r.total)),1)])])])]),(0,a._)("section",Hi,[(0,a._)("div",Oi,(0,o.zw)(e.$t("Bank details")),1),(0,a._)("div",Zi,[(0,a.Uk)((0,o.zw)(i.company.nameForBank)+", "+(0,o.zw)(i.company.zipcode)+" "+(0,o.zw)(i.company.city),1),ji,i.company.bank?((0,a.wg)(),(0,a.iD)("span",Ki,[(0,a.Uk)((0,o.zw)(i.company.bank),1),Qi])):(0,a.kq)("",!0),i.company.swift?((0,a.wg)(),(0,a.iD)("span",Yi,[(0,a.Uk)("BIC: "+(0,o.zw)(i.company.swift),1),Xi])):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,o.zw)(i.company.iban),1)])]),i.invoiceNote?((0,a.wg)(),(0,a.iD)("section",{key:0,class:"mb-4",innerHTML:i.invoiceNote},null,8,Ji)):(0,a.kq)("",!0),(0,a._)("section",Gi,[(0,a._)("div",{class:(0,o.C_)({"col-6":r.hasSignature,col:!r.hasSignature})},[i.thanksMessage?((0,a.wg)(),(0,a.iD)("span",{key:0,innerHTML:i.thanksMessage},null,8,en)):((0,a.wg)(),(0,a.iD)("span",tn,(0,o.zw)(e.$t("defaultInvoiceThanks")),1))],2),r.hasSignature?((0,a.wg)(),(0,a.iD)("div",nn,[i.signatureImage?((0,a.wg)(),(0,a.iD)("img",{key:0,src:i.signatureImage,id:"signature-image"},null,8,an)):(0,a.kq)("",!0),i.signatureText?((0,a.wg)(),(0,a.iD)("p",on,(0,o.zw)(i.signatureText),1)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])])])],4)}var rn={name:"InvoicePreview",props:["company","contrastColor","invoiceNote","logo","thanksMessage","signatureText","signatureImage"],computed:{vat_rate(){return this.company.vatId?7.7:0},vat(){return this.invoice.subtotal*this.vat_rate/100},total(){return this.invoice.subtotal+this.vat},hasSignature(){return Boolean(this.signatureText||this.signatureImage)}},data(){return{client:{name:"Jean Dupont SA",address:"Route des Acacias 1",city:"Genève",zipCode:"1211",country:"CH"},invoice:{title:this.$t("invoiceTitle"),code:"dupont-003",date:"12 octobre 2023",due_date:"12 novembre 2023",description:this.$t("invoiceDescription"),period_start:"1er septembre 2023",period_end:"15 septembre 2023",lines:[{description:"Nettoyage de la toiture",quantity:1,unit:"h",pricePerUnit:80,total:80},{description:"Réparation de la cheminée",quantity:1,unit:"pièce",pricePerUnit:100,total:100},{description:"Remplacement de tuiles",quantity:5,unit:"pièce",pricePerUnit:10,total:50},{description:"Traitement hydrofuge",quantity:1.5,unit:"h",pricePerUnit:80,total:120}],subtotal:350}}},methods:{formatAmount(e){let t=e.toFixed(2);return t=t.replace(/\.00$/,".-"),t}}};const ln=(0,ye.Z)(rn,[["render",sn],["__scopeId","data-v-8637c664"]]);var dn=ln;const cn={class:"form-group"},un={class:"custom-file"},pn={class:"custom-file-label",for:"customFile"};function mn(e,t,i,n,s,r){return(0,a.wg)(),(0,a.iD)("div",cn,[(0,a._)("label",null,(0,o.zw)(i.label),1),(0,a._)("div",un,[(0,a._)("input",{type:"file",class:"custom-file-input",onChange:t[0]||(t[0]=(...e)=>r.onFileChange&&r.onFileChange(...e))},null,32),(0,a._)("label",pn,(0,o.zw)(e.$t("Choose file")),1)])])}var hn={props:{label:{type:String,default:"Upload File"}},methods:{onFileChange(e){let t=e.target.files;t.length>0&&this.$emit("input",t)}}};const gn=(0,ye.Z)(hn,[["render",mn]]);var vn=gn,yn={name:"InvoiceSettingsForm",components:{InvoicePreview:dn,Editor:Ht.Z,FileInput:vn},props:{company:{type:Object,required:!0},updateLogoUrl:{type:String,required:!0},updateSignatureImageUrl:{type:String,required:!0},onUpdate:{type:Function,required:!0}},emits:["prev","next"],data:function(){return{logo:"",contrastColor:this.company.contrastColor||"#000000",invoiceNote:this.company.invoiceNote,thanksMessage:this.company.thanksMessage,signatureText:this.company.signatureText,signatureImage:"",activeSection:"both",isResizing:!1,startX:0,containerWidth:0,formWidth:0,previewWidth:0}},computed:{logoUrl(){return this.logo&&this.logo[0]&&this.logo[0].type?URL.createObjectURL(this.logo[0]):this.company.logo},logoFileName(){return this.logo&&this.logo[0]&&this.logo[0].type?this.logo[0].name:this.$filename(this.company.logo)},signatureImageUrl(){return this.signatureImage&&this.signatureImage[0]&&this.signatureImage[0].type?URL.createObjectURL(this.signatureImage[0]):this.company.signatureImage},signatureFileName(){return this.signatureImage&&this.signatureImage[0]&&this.signatureImage[0].type?this.signatureImage[0].name:this.$filename(this.company.signatureImage)},tinyMCELang(){const{locale:e}=(0,$e.QT)();switch(e.value){case"de":return"de";case"fr":return"fr_FR";case"it":return"it";default:return""}},tinyMCEConfig(){let e={height:"16em",menubar:!1,plugins:["lists","link","searchreplace"],toolbar:"undo redo | bold italic underline strikethrough | forecolor |          bullist numlist outdent indent | removeformat"},t=this.tinyMCELang;return t&&(e.language=t),e},gridStyle(){switch(this.activeSection){case"form":return{gridTemplateColumns:"1fr 24px 0"};case"preview":return{gridTemplateColumns:"0 24px 1fr"};default:return{gridTemplateColumns:"1fr 24px 2fr"}}},handleCursor(){return"both"===this.activeSection?"col-resize":"pointer"}},methods:{async uploadImage(e,t){const i=t[0];if(i)try{await this.$http.put(e,i,{headers:{"Content-Type":i.type,"X-File-Name":i.name}})}catch(n){console.log(n)}},async uploadLogo(){await this.uploadImage(this.updateLogoUrl,this.logo)},async uploadSignatureImage(){await this.uploadImage(this.updateSignatureImageUrl,this.signatureImage)},handleLogoInput(e){this.logo=e},handleSignatureImageInput(e){this.signatureImage=e},async handleSubmit(e){this.logo&&await this.uploadLogo(),this.signatureImage&&await this.uploadSignatureImage(),-1===e?this.$emit("prev"):this.$emit("next")},setActiveSection(e){this.$refs.form.style="",this.$refs.preview.style="",this.activeSection=e},startResizing(e){"both"!==!this.activeSection&&(this.isResizing=!0,this.startX=e.clientX,this.containerWidth=this.$refs.container.offsetWidth,this.formWidth=this.$refs.form.offsetWidth,this.previewWidth=this.$refs.preview.offsetWidth,document.addEventListener("mousemove",this.resize),document.addEventListener("mouseup",this.stopResizing))},resize(e){if(!this.isResizing)return;const t=e.clientX-this.startX,i=this.formWidth+t,n=this.previewWidth-t;i<200||n<200||(this.$refs.form.style.width=`${i}px`,this.$refs.preview.style.width=`${n}px`)},stopResizing(){this.isResizing=!1,this.formWidth=this.$refs.form.offsetWidth,this.previewWidth=this.$refs.preview.offsetWidth,document.removeEventListener("mousemove",this.resize),document.removeEventListener("mouseup",this.stopResizing)},toggleSection(){"both"!==this.activeSection&&this.setActiveSection("both")}}};const bn=(0,ye.Z)(yn,[["render",Mt],["__scopeId","data-v-1ba17fc8"]]);var fn=bn;const wn={id:"div_id_email_signature",class:"form-group"},_n={for:"id_email_signature"},kn={id:"div_id_from_email",class:"form-group"},Cn={for:"id_from_email",class:"requiredField"},zn=(0,a._)("span",{class:"asteriskField"},"*",-1),Sn={id:"div_id_bcc_email",class:"form-group"},xn={for:"id_bcc_email"},$n={id:"hint_id_bcc_email",class:"form-text text-muted"},In={class:"buttonHolder"},Un=["value"],Dn=["value"];function Fn(e,t,i,s,r,l){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",wn,[(0,a._)("label",_n,(0,o.zw)(e.$t("Signature (email)")),1),(0,a.wy)((0,a._)("textarea",{name:"email_signature",cols:"40",rows:"10",id:"id_email_signature",class:"textarea form-control","onUpdate:modelValue":t[0]||(t[0]=t=>e.emailSignature=t)},null,512),[[n.nr,e.emailSignature]])]),(0,a._)("div",kn,[(0,a._)("label",Cn,[(0,a.Uk)((0,o.zw)(e.$t("Reply-to sender email")),1),zn]),(0,a.wy)((0,a._)("input",{type:"text",name:"from_email",maxlength:"255",required:"required",id:"id_from_email",class:"textinput textInput form-control","onUpdate:modelValue":t[1]||(t[1]=t=>e.fromEmail=t)},null,512),[[n.nr,e.fromEmail]])]),(0,a._)("div",Sn,[(0,a._)("label",xn,(0,o.zw)(e.$t("BCC email")),1),(0,a.wy)((0,a._)("input",{type:"email",name:"bcc_email",maxlength:"254",id:"id_bcc_email",class:"emailinput form-control","onUpdate:modelValue":t[2]||(t[2]=t=>e.bccEmail=t)},null,512),[[n.nr,e.bccEmail]]),(0,a._)("small",$n,(0,o.zw)(e.$t("Address that would receive a copy of every outgoing email")),1)]),(0,a._)("div",In,[(0,a._)("input",{type:"button",name:"prev-3",value:e.$t("Previous"),class:"btn btn btn-secondary white",onClick:t[3]||(t[3]=e=>l.handleSubmit(-1))},null,8,Un),(0,a._)("input",{type:"submit",value:e.$t("Save company"),class:"btn btn btn-primary white",onClick:t[4]||(t[4]=e=>l.handleSubmit())},null,8,Dn)])],64)}var Tn={name:"InvoiceEmailForm",props:{company:{type:Object,required:!0},onUpdate:{type:Function,required:!0}},emits:["prev","next"],data:function(){return{emailSignature:this.company.emailSignature,fromEmail:this.company.fromEmail,bccEmail:this.company.bccEmail}},methods:{handleSubmit(e){-1===e?this.$emit("prev"):this.$emit("submit")}}};const An=(0,ye.Z)(Tn,[["render",Fn]]);var qn=An;const En={zipCode:"zip_code",additionalPhone:"additional_phone",vatId:"vat_id",nameForBank:"name_for_bank",swift:"bic",contrastColor:"contrast_color",invoiceNote:"invoice_note",signatureText:"signature_text",signatureImage:"signature_image",thanksMessage:"thanks",emailSignature:"email_signature",fromEmail:"from_email",bccEmail:"bcc_email"},Pn={};for(const[ta,ia]of Object.entries(En))Pn[ia]=ta;var Bn={name:"App",components:{CompanySearch:Ve,CompanyForm:xe,BankingForm:pt,InvoiceSettingsForm:fn,InvoiceEmailForm:qn},data(){return{searchTerm:"",stepIndex:1,stepsFinished:[!1,!1,!1,!1],company:{id:"",name:"",address:"",zipCode:"",city:"",country:"",phone:"",additionalPhone:"",email:"",website:"",vatId:"",iban:"",nameForBank:"",bank:"",swift:"",logo:"",contrastColor:"#000000",invoiceNote:"",signatureText:"",signatureImage:"",thanksMessage:"",emailSignature:"",fromEmail:"",bccEmail:""},urls:{companiesUrl:"",companyUpdateUrl:"",ibanUrl:"",successUrl:"",updateLogoUrl:"",updateSignatureImageUrl:""}}},methods:{companyDetailLookupResult(e){this.company.name=e.name,this.company.address=e.address,this.company.country=e.country,this.company.city=e.city,this.company.zipCode=e.zip_code,this.company.vatId=e.vat_id,this.$refs.companyForm.setCompany(this.company),this.$refs.bankingForm.setCompany(this.company)},nextStep(){this.stepsFinished[this.stepIndex]=!0,this.stepIndex+=1},previousStep(){this.stepIndex-=1},submit(){this.stepsFinished[3]=!0,window.location.href=this.urls.successUrl},onCompanyUpdate(e){let t={};for(const[a,o]of Object.entries(e))this.company[a]=o,t[En[a]||a]=o;const i=this.company.id?this.urls.companyUpdateUrl:this.urls.companiesUrl,n=this.company.id?"patch":"post";this.$http[n](i,t).then((e=>{this.setCompany(e.data)})).catch((e=>{console.error("Error:",e)}))},cleanCompany(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[Pn[e]||e,t])))},setCompany(e){this.urls.companyUpdateUrl=this.urls.companiesUrl+e.id+"/",this.company=this.cleanCompany(e)},loadCompany(){this.$http.get(this.urls.companyUpdateUrl).then((e=>{const t=e.data;this.setCompany(t),this.$refs.companyForm.setCompany(this.company)})).catch((e=>{console.log(e)}))}},mounted(){const e=this.$root.$el.parentElement;this.$i18n.locale=e.getAttribute("data-language-code"),this.urls.companiesUrl=e.getAttribute("data-companies-url"),this.urls.ibanUrl=e.getAttribute("data-iban-url"),this.urls.companyUpdateUrl=e.getAttribute("data-company-update-url"),this.urls.successUrl=e.getAttribute("data-success-url");const t=e.getAttribute("data-user-email"),i=e.getAttribute("data-user-name");t&&(i&&(this.company.fromEmail=`${i} <${t}>`),this.company.fromEmail=t),this.urls.companyUpdateUrl&&(this.urls.updateLogoUrl=this.urls.companyUpdateUrl+"update_logo/",this.urls.updateSignatureImageUrl=this.urls.companyUpdateUrl+"update_signature_image/",this.loadCompany(),this.stepsFinished=[!0,!0,!0,!0])},setup(){const{t:e}=(0,$e.QT)({inheritLocale:!0,useScope:"local"});return{t:e}}};const Vn=(0,ye.Z)(Bn,[["render",A]]);var Ln=Vn,Wn=i(154),Nn=i(334),Rn=i.n(Nn),Mn=i(746),Hn=i(330);const On={config:{classes:(0,Hn.C1)({global:{outer:"$reset mb-3",input:"form-control",label:"form-label",help:"form-text"},form:{form:"col-md-4 col-lg-3 mt-5 mx-auto p-5 border rounded"},file:{fileList:"list-unstyled",input:"custom-file-input",inner:"custom-file"},range:{input:"$reset form-range"},submit:{outer:"$reset mt-3",input:"$reset btn btn-primary"}})}};var Zn=On;function jn(){const e=i(948),t={};return e.keys().forEach((i=>{const n=i.match(/([A-Za-z0-9-_]+)\./i);if(n&&n.length>1){const a=n[1];t[a]=e(i)}})),t}var Kn=(0,$e.o)({legacy:!1,locale:"fr",fallbackLocale:"fr",messages:jn()}),Qn=i(123),Yn=i.n(Qn);const Xn="";Wn.Z.defaults.baseURL=Xn,Wn.Z.get(Xn+"/api/csrf-token/").then((e=>{const t=e.data.csrf_token;Wn.Z.defaults.headers.common["X-CSRFToken"]=t}));const Jn=e=>("checkbox"===e.props.type||"radio"===e.props.type)&&e.props.options;function Gn(e){e.on("created",(()=>{const t=e.props.definition.schema;e.props.definition.schema=(i={})=>{const n=e.props.parsedRules.some((e=>"required"===e.name));return n&&(Jn(e)?i.legend={children:["$label","*"]}:i.label={children:["$label","*"]}),t(i)}}))}const ea=(0,n.ri)(Ln);ea.config.globalProperties.$http=Wn.Z,ea.config.globalProperties.$formatAmount=function(e){let t=e.toFixed(2);return t=t.replace(/\.00$/,".-"),t},ea.config.globalProperties.$filename=function(e){return e?e.split("/").pop().split("#")[0].split("?")[0]:""},ea.use(Kn).use(Mn.BA,(0,Mn.u_)({config:Zn.config,plugins:[Gn]})).use(Rn()).use(Yn()).mount("#app")},948:function(e,t,i){var n={"./de.json":929,"./en.json":790,"./fr.json":844};function a(e){var t=o(e);return i(t)}function o(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=948},929:function(e){"use strict";e.exports=JSON.parse('{"Search on company register":"Suche im Handelsregister","City":"Stadt","Postal code":"Postleitzahl","Email address is invalid":"E-Mail-Adresse ist ungültig","This field is required":"Dieses Feld ist erforderlich","websiteInvalid":"Die Website-Adresse ist ungültig, sie muss mit http[s]:// beginnen","Phone number is invalid":"Telefonnummer ist ungültig","Choose file":"Datei auswählen","Invoice ID":"Rechnungs-ID","Due date":"Fälligkeitsdatum","Description":"Beschreibung","Quantity":"Menge","Unit":"Einheit","Unit price":"Einheitspreis","Cost":"Kosten","Subtotal":"Zwischensumme","VAT":"MwSt.","Total":"Gesamt","Bank details":"Bankverbindung","defaultInvoiceThanks":"Vielen Dank für Ihr Vertrauen.","Contrast color":"Kontrastfarbe","Setup your company\'s contact informations":"Richten Sie die Kontaktinformationen Ihres Unternehmens ein","Setup your banking informations to receive the payments":"Richten Sie Ihre Bankverbindung ein, um Zahlungen zu erhalten","Setup the invoices\' look and feel":"Richten Sie das Aussehen der Rechnungen ein","VAT ID":"MwSt.","The IBAN seems invalid":"Die IBAN scheint ungültig zu sein","Often displayed on the back of your bank card, or in your ebanking":"Wird oft auf der Rückseite Ihrer Bankkarte oder in Ihrem E-Banking angezeigt","Bank account\'s owner name":"Name des Kontoinhabers","Bank":"Bank","Previous":"Zurück","Next":"Weiter","Company name":"Firmenname","Address":"Adresse","Country":"Land","Phone number":"Telefonnummer","Additional phone number":"Zusätzliche Telefonnummer","Email":"E-Mail","Website":"Website","Invoice":"Rechnung","Tel":"Tel","workDone":"Arbeiten zwischen dem {start} und dem {end}","Step 1":"Schritt 1","Step 2":"Schritt 2","Step 3":"Schritt 3","Notes":"Notizen","Displayed between banking details and signature":"Wird zwischen den Bankdaten und der Signatur angezeigt","Thanks":"Danke","Signature (text)":"Signatur (Text)","Signature (image)":"Signatur (Bild)","Signature (email)":"Signatur (E-Mail)","Reply-to sender email":"Antwort an Absender E-Mail","BCC email":"BCC E-Mail","Address that would receive a copy of every outgoing email":"","thanksMessageHelptext":"Thanks at bottom of invoice. If set, this will be on every invoice, regardless of language","Logo":"Logo","Save company":"Speichern","invoiceTitle":"Dachwartung","invoiceDescription":"Die Wartungsarbeiten am Dach umfassten Reinigung, Überprüfung der Regenrinnen, Reparatur des Schornsteins, Austausch beschädigter Dachziegel und das Auftragen einer wasserabweisenden Behandlung. Diese Arbeiten wurden von einem qualifizierten Dachdecker durchgeführt.","Company":"Unternehmen","Contact informations":"Kontaktdaten","Where will you get paid":"Wo werden Sie bezahlt?","Invoices":"Rechnungen","What will invoices look like":"Wie werden die Rechnungen aussehen?","Emails":"E-Mails","How do you send the invoices":"Wie senden Sie die Rechnungen?","Step 4":"Schritt 4","Setup the email used to send invoices":"Richten Sie die E-Mail ein, mit der Rechnungen gesendet werden"}')},790:function(e){"use strict";e.exports=JSON.parse('{"Search on company register":"Search on company register","City":"City","Postal code":"Postal code","Email address is invalid":"Email address is invalid","This field is required":"This field is required","Phone number is invalid":"Phone number is invalid","websiteInvalid":"Website address is invalid, it should begin with http[s]://","Choose file":"Choose file","Invoice ID":"Invoice ID","Due date":"Due date","Description":"Description","Quantity":"Quantity","Unit":"Unit","Unit price":"Unit price","Cost":"Cost","Subtotal":"Subtotal","VAT":"VAT","Total":"Total","Bank details":"Bank details","defaultInvoiceThanks":"Thank you for your continued confidence.","Contrast color":"Contrast color","Setup your company\'s contact informations":"Setup your company\'s contact informations","Step 2":"The le step 2","Setup your banking informations to receive the payments":"Setup your banking informations to receive the payments","Setup the invoices\' look and feel":"Setup the invoices\' look and feel","The IBAN seems invalid":"The IBAN seems invalid","Often displayed on the back of your bank card, or in your ebanking":"Often displayed on the back of your bank card, or in your ebanking","Bank account\'s owner name":"Bank account\'s owner name","Bank":"Bank","Previous":"Previous","Next":"Next","Company name":"Company name","Address":"Address","Country":"Country","Phone number":"Phone number","Additional phone number":"Additional phone number","Email":"Email","Website":"Website","Invoice":"Invoice","Tel":"Tel.","workDone":"Work done between {start} and {end}","Step 1":"Step 1","Step 3":"Step 3","Notes":"Notes","Displayed between banking details and signature":"Displayed between banking details and signature","Thanks":"Thanks","thanksMessageHelptext":"Thanks at bottom of invoice. If set, this will be on every invoice, regardless of language","Signature (text)":"Signature (text)","Signature (image)":"Signature (image)","Signature (email)":"Signature (email)","Reply-to sender email":"Reply-to sender email","BCC email":"BCC email","Address that would receive a copy of every outgoing email":"Address that would receive a copy of every outgoing email","Logo":"Logo","Save company":"Save","VAT ID":"VAT","invoiceTitle":"Roof Maintenance","invoiceDescription":"The roof maintenance works included cleaning, checking the gutters, repairing the chimney, replacing damaged tiles, and applying a waterproofing treatment. They were carried out by a qualified roofer.","Company":"Company","Contact informations":"Contact informations","Where will you get paid":"Where will you get paid?","Invoices":"Invoices","What will invoices look like":"What will invoices look like?","Emails":"Emails","How do you send the invoices":"How do you send the invoices?","Step 4":"Step 4","Setup the email used to send invoices":"Setup the email used to send invoices"}')},844:function(e){"use strict";e.exports=JSON.parse('{"Search on company register":"Chercher dans le registre du commerce","City":"Localité","Postal code":"Code postal","Email address is invalid":"L\'adresse e-mail est invalide","This field is required":"Ce champ est obligatoire","Phone number is invalid":"Le numéro de téléphone est invalide","websiteInvalid":"L\'adresse du site web est invalide, elle doit commencer par http[s]://","Choose file":"Choisir un fichier","Invoice ID":"Numéro de facture","Due date":"Date d\'échéance","Description":"Description","Quantity":"Quantité","Unit":"Unité","Unit price":"Prix unitaire","Cost":"Coût","Subtotal":"Sous-total","VAT":"TVA","Total":"Total","Bank details":"Coordonnées bancaires","defaultInvoiceThanks":"Merci pour votre confiance.","Contrast color":"Couleur de contraste","Setup your company\'s contact informations":"Configurer les informations de contact de votre entreprise","Setup your banking informations to receive the payments":"Configurer les informations bancaires pour recevoir les paiements","Setup the invoices\' look and feel":"Configurer l\'apparence des factures","VAT ID":"TVA","The IBAN seems invalid":"L\'IBAN semble invalide","Often displayed on the back of your bank card, or in your ebanking":"Souvent affiché au dos de votre carte bancaire, ou dans votre ebanking","Bank account\'s owner name":"Nom du propriétaire du compte bancaire","Bank":"Banque","Previous":"Précédent","Next":"Suivant","Company name":"Nom de l\'entreprise","Address":"Adresse","Country":"Pays","Phone number":"Numéro de téléphone","Additional phone number":"Numéro de téléphone supplémentaire","Email":"E-mail","Website":"Site web","Invoice":"Facture","Tel":"Tél.","workDone":"Travaux effectués entre le {start} et le {end}","Step 1":"Étape 1","Step 2":"Étape 2","Step 3":"Étape 3","Notes":"Notes","Displayed between banking details and signature":"Affiché entre les coordonnées bancaires et la signature","Thanks":"Remerciements","thanksMessageHelptext":"Remerciements en bas de facture. Si défini, cela sera sur chaque facture, indépendamment de la langue","Signature (text)":"Signature (texte)","Signature (image)":"Signature (image)","Signature (email)":"Signature (e-mail)","Reply-to sender email":"Adresse e-mail pour les réponses","BCC email":"Adresse e-mail pour les copies cachées","Address that would receive a copy of every outgoing email":"Adresse qui recevra une copie de chaque e-mail sortant","Logo":"Logo","Save company":"Enregistrer","invoiceTitle":"Entretien de votre toiture","invoiceDescription":"Les travaux d\'entretien de toiture ont inclus le nettoyage, la vérification des gouttières, la réparation de la cheminée, le remplacement de tuiles endommagées et l\'application d\'un traitement hydrofuge. Ils ont été effectués par un couvreur qualifié.","Company":"Entreprise","Contact informations":"Informations de contact","Where will you get paid":"Où serez-vous payé ?","Invoices":"Factures","What will invoices look like":"À quoi ressembleront les factures","Emails":"E-mails","How do you send the invoices":"Comment envoyez-vous les factures?","Step 4":"Étape 4","Setup the email used to send invoices":"Configurer l\'e-mail utilisé pour envoyer les factures"}')}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=e,function(){var e=[];i.O=function(t,n,a,o){if(!n){var s=1/0;for(c=0;c<e.length;c++){n=e[c][0],a=e[c][1],o=e[c][2];for(var r=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[l])}))?n.splice(l--,1):(r=!1,o<s&&(s=o));if(r){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,a,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,s=n[0],r=n[1],l=n[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(l)var c=l(i)}for(t&&t(n);d<s.length;d++)o=s[d],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(c)},n=self["webpackChunkcompanies"]=self["webpackChunkcompanies"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(818)}));n=i.O(n)})();
//# sourceMappingURL=app.js.map